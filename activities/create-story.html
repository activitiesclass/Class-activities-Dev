<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒŸ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ - Ù†Ø´Ø§Ø· ØªÙØ§Ø¹Ù„ÙŠ Ø°ÙƒÙŠ</title>
  
  <!-- Ø§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  
  <style>
    /* ===== CSS Ø£Ø³Ø§Ø³ÙŠ Ù…Ø¯Ù…Ø¬ ===== */
    * {
        box-sizing: border-box;
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
    }

    html, body {
        overflow-x: hidden;
        max-width: 100vw;
        width: 100%;
        margin: 0;
        padding: 0;
        direction: rtl;
        font-family: 'Cairo', sans-serif;
        background: linear-gradient(135deg, #f0f4ff, #dfe9f3);
    }

    /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
    .container-responsive {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .grid-responsive {
        display: grid;
        gap: 1rem;
    }

    .grid-responsive.cols-1 { grid-template-columns: 1fr; }
    .grid-responsive.cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-responsive.cols-3 { grid-template-columns: repeat(3, 1fr); }

    /* Ø§Ù„ØªØ§ÙŠØ¨ÙˆØºØ±Ø§ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
    .text-responsive {
        font-size: clamp(0.875rem, 2.5vw, 1.125rem);
        line-height: 1.6;
    }

    .heading-responsive {
        font-size: clamp(1.25rem, 4vw, 2rem);
        line-height: 1.3;
    }

    .title-responsive {
        font-size: clamp(1.5rem, 5vw, 2.5rem);
        line-height: 1.2;
    }

    /* Ø£Ù†Ù…Ø§Ø· Ø£Ø³Ø§Ø³ÙŠØ© */
    .container {
        max-width: 800px;
        margin: auto;
        padding: 2rem;
        background: white;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        border-radius: 16px;
        margin-top: 50px;
        text-align: center;
    }

    select, button {
        font-family: 'Cairo', sans-serif;
        font-size: 1.2rem;
        padding: 0.6rem 1.2rem;
        border: 2px solid #ccc;
        border-radius: 12px;
        background-color: #f9f9f9;
        transition: all 0.3s ease;
    }

    select:focus, button:hover {
        border-color: #4285f4;
        background-color: #e3efff;
    }

    button {
        cursor: pointer;
        background-color: #4285f4;
        color: white;
        font-weight: bold;
        margin-top: 1rem;
    }

    #activityContainer {
        margin-top: 2rem;
        padding: 1rem;
        background: #f1f1f1;
        border-radius: 12px;
        min-height: 150px;
    }

    @keyframes popName {
        0% {
            transform: scale(0.2);
            opacity: 0;
            filter: brightness(200%);
        }
        80% {
            transform: scale(1.2);
            opacity: 1;
            filter: brightness(120%);
        }
        100% {
            transform: scale(1);
            filter: brightness(100%);
        }
    }

    #randomNameDisplay {
        font-size: 3rem;
        font-weight: bold;
        color: white;
        background-color: #00796B;
        padding: 30px 40px;
        border-radius: 16px;
        box-shadow: 0 0 40px rgba(0, 121, 107, 0.6);
        display: inline-block;
        transition: all 0.3s ease-in-out;
        opacity: 0;
    }

    #randomNameDisplay.show {
        animation: popName 0.6s ease-out;
        opacity: 1;
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ø¨Ù†Ø´Ø§Ø· Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ØµØ© */
    
    /* ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¹ÙÙ…Ø§Ù†ÙŠØ© ===== */
    :root {
      --omani-red: #DC143C;
      --omani-green: #228B22;
      --omani-gold: #FFD700;
      --omani-blue: #2196F3;
      --omani-purple: #9C27B0;
    }

    /* ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ±Ø© ===== */
    .control-buttons-container {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 12px;
      z-index: 1500;
      flex-wrap: wrap;
    }

    .control-btn {
      width: 55px;
      height: 55px;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      color: white;
      background: linear-gradient(135deg, var(--omani-red) 0%, #ff4569 100%);
      box-shadow: 0 6px 20px rgba(220, 20, 60, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .control-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .control-btn:hover::before {
      left: 100%;
    }

    .control-btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(220, 20, 60, 0.4);
    }

    .control-btn:active {
      transform: translateY(-1px) scale(0.98);
    }

    /* Ø£Ù„ÙˆØ§Ù† Ù…Ø®ØµØµØ© Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
    #backBtn {
      background: linear-gradient(135deg, var(--omani-blue) 0%, #42a5f5 100%);
      box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
    }

    #backBtn:hover {
      box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
    }

    #muteBtn {
      background: linear-gradient(135deg, var(--omani-purple) 0%, #ba68c8 100%);
      box-shadow: 0 6px 20px rgba(156, 39, 176, 0.3);
    }

    #muteBtn:hover {
      box-shadow: 0 8px 25px rgba(156, 39, 176, 0.4);
    }

    #muteBtn.muted {
      background: linear-gradient(135deg, #757575 0%, #9e9e9e 100%);
      box-shadow: 0 6px 20px rgba(117, 117, 117, 0.3);
    }

    #instructionsBtn {
      background: linear-gradient(135deg, var(--omani-green) 0%, #66bb6a 100%);
      box-shadow: 0 6px 20px rgba(34, 139, 34, 0.3);
    }

    #instructionsBtn:hover {
      box-shadow: 0 8px 25px rgba(34, 139, 34, 0.4);
    }

    #fullscreenBtn {
      background: linear-gradient(135deg, var(--omani-gold) 0%, #ffeb3b 100%);
      box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
      color: #333;
    }

    #fullscreenBtn:hover {
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
    }

    #clearMemoryBtn {
      background: linear-gradient(135deg, #ff7043 0%, #ff8a65 100%);
      box-shadow: 0 6px 20px rgba(255, 112, 67, 0.3);
      color: white;
    }

    #clearMemoryBtn:hover {
      box-shadow: 0 8px 25px rgba(255, 112, 67, 0.4);
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ù…ØªØ­Ø±ÙƒØ© Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
    .control-btn i {
      transition: all 0.3s ease;
    }

    .control-btn:hover i {
      transform: scale(1.1);
    }

    #backBtn:hover i {
      animation: bounceLeft 0.6s ease-in-out;
    }

    #muteBtn:hover i {
      animation: pulse 0.6s ease-in-out;
    }

    #instructionsBtn:hover i {
      animation: spin 0.6s ease-in-out;
    }

    #fullscreenBtn:hover i {
      animation: expand 0.6s ease-in-out;
    }

    #clearMemoryBtn:hover i {
      animation: erase 0.8s ease-in-out;
    }

    /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
    @keyframes bounceLeft {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(-3px); }
    }

    @keyframes expand {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes erase {
      0%, 100% { transform: translateX(0) scale(1); }
      25% { transform: translateX(-3px) scale(1.1); }
      50% { transform: translateX(3px) scale(1.1); }
      75% { transform: translateX(-2px) scale(1.05); }
    }

    /* Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
    .control-btn[title] {
      position: relative;
    }

    .control-btn[title]:hover::after {
      content: attr(title);
      position: absolute;
      bottom: -45px;
      right: 50%;
      transform: translateX(50%);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 0.8rem;
      white-space: nowrap;
      z-index: 1000;
      animation: tooltipFadeIn 0.3s ease-out;
    }

    @keyframes tooltipFadeIn {
      from { opacity: 0; transform: translateX(50%) translateY(5px); }
      to { opacity: 1; transform: translateX(50%) translateY(0); }
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
    @media (max-width: 768px) {
      .control-buttons-container {
        top: 10px;
        right: 10px;
        gap: 8px;
        flex-wrap: wrap;
        max-width: calc(100vw - 20px);
      }

      .control-btn {
        width: 45px;
        height: 45px;
        font-size: 1.1rem;
      }

      .control-btn[title]:hover::after {
        display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
      }
    }

    @media (max-width: 480px) {
      .control-buttons-container {
        top: 5px;
        right: 5px;
        left: 5px;
        justify-content: center;
        gap: 6px;
      }

      .control-btn {
        width: 42px;
        height: 42px;
        font-size: 1rem;
        flex: 0 0 auto;
      }
    }

    /* Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© */
    .confirmation-overlay {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
    }

    .confirmation-content {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 255, 0.98) 100%);
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      margin: 20px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
      border: 3px solid rgba(255, 87, 51, 0.2);
      text-align: center;
      animation: confirmationSlideIn 0.4s ease-out;
    }

    @keyframes confirmationSlideIn {
      from {
        transform: scale(0.8) translateY(30px);
        opacity: 0;
      }
      to {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }

    .confirmation-header {
      margin-bottom: 25px;
    }

    .warning-icon {
      font-size: 3rem;
      color: #ff5722;
      margin-bottom: 15px;
      animation: warningPulse 2s ease-in-out infinite;
    }

    @keyframes warningPulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    .confirmation-header h3 {
      color: #333;
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0;
    }

    .confirmation-body {
      text-align: right;
      margin-bottom: 30px;
    }

    .warning-text {
      font-size: 1.1rem;
      color: #333;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
    }

    .warning-details {
      background: rgba(255, 87, 51, 0.1);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      border: 2px solid rgba(255, 87, 51, 0.2);
    }

    .warning-details h4 {
      color: #ff5722;
      font-size: 1.1rem;
      margin-bottom: 15px;
      text-align: center;
    }

    .warning-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .warning-list li {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 0;
      color: #555;
      font-weight: 500;
    }

    .warning-list li i {
      color: #ff5722;
      width: 20px;
    }

    .note-text {
      background: rgba(76, 175, 80, 0.1);
      border-radius: 10px;
      padding: 15px;
      color: #2e7d32;
      font-weight: 500;
      margin-top: 20px;
      border: 2px solid rgba(76, 175, 80, 0.2);
    }

    .confirmation-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    .btn-confirm {
      padding: 12px 25px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-width: 150px;
    }

    .btn-danger {
      background: linear-gradient(135deg, #ff5722 0%, #f44336 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(255, 87, 34, 0.3);
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 87, 34, 0.4);
    }

    .btn-cancel {
      background: linear-gradient(135deg, #757575 0%, #616161 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(117, 117, 117, 0.3);
    }

    .btn-cancel:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(117, 117, 117, 0.4);
    }

    @media (max-width: 480px) {
      .confirmation-content {
        margin: 10px;
        padding: 20px;
      }

      .confirmation-actions {
        flex-direction: column;
      }

      .btn-confirm {
        min-width: auto;
        width: 100%;
      }
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø¹Ø§Ù…Ø© ===== */
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: var(--bg-primary, linear-gradient(135deg, #FFEBEE 0%, #E8F5E8 50%, #FFF8E1 100%));
      min-height: 100vh;
    }

    .page-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248,249,250,0.9));
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .header-icon {
      font-size: 3rem;
      margin-bottom: 15px;
      color: var(--omani-red);
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ===== */
    .game-settings-card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .settings-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 25px;
      color: var(--omani-red);
      font-size: 1.5rem;
      font-weight: bold;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #fafafa;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--omani-red);
      background: white;
      box-shadow: 0 0 0 3px rgba(220, 20, 60, 0.1);
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      min-height: 48px;
    }

    .btn-primary {
      background: linear-gradient(45deg, var(--omani-red), #ff4569);
      color: white;
      box-shadow: 0 4px 15px rgba(220, 20, 60, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(220, 20, 60, 0.4);
    }

    .btn-secondary {
      background: linear-gradient(45deg, #6c757d, #78909c);
      color: white;
      box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
    }

    .btn-success {
      background: linear-gradient(45deg, var(--omani-green), #4caf50);
      color: white;
      box-shadow: 0 4px 15px rgba(34, 139, 34, 0.3);
    }

    .btn-warning {
      background: linear-gradient(45deg, #ff9800, #ffb74d);
      color: white;
      box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
    }

    .btn-info {
      background: linear-gradient(45deg, var(--omani-blue), #64b5f6);
      color: white;
      box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
    }

    .btn-danger {
      background: linear-gradient(45deg, #f44336, #ef5350);
      color: white;
      box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø´Ø§Ø· ===== */
    .story-container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      display: none;
    }

    .story-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(220, 20, 60, 0.1), rgba(34, 139, 34, 0.1));
      border-radius: 15px;
    }

    .current-speaker-section {
      text-align: center;
      margin-bottom: 30px;
      padding: 25px;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
      border-radius: 15px;
      border: 2px solid rgba(255, 215, 0, 0.3);
    }

    .speaker-name {
      font-size: 2rem;
      font-weight: bold;
      color: var(--omani-red);
      margin-bottom: 10px;
    }

    .speaker-role {
      font-size: 1.2rem;
      color: var(--omani-green);
      margin-bottom: 15px;
    }

    /* ===== Ø§Ù„Ù…Ø¤Ù‚Øª ===== */
    .timer-section {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05));
      border-radius: 15px;
    }

    .timer-canvas {
      border-radius: 50%;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .time-remaining {
      font-size: 3rem;
      font-weight: bold;
      color: var(--omani-blue);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .time-warning {
      color: var(--omani-red) !important;
      animation: pulse 1s infinite;
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªØ­ÙƒÙ… ===== */
    .story-controls {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }

    /* ===== Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ† ===== */
    .participants-container {
      background: white;
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      display: none;
    }

    .participants-header {
      text-align: center;
      margin-bottom: 20px;
      color: var(--omani-green);
      font-size: 1.5rem;
      font-weight: bold;
    }

    .participants-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .participant-card {
      padding: 15px;
      background: linear-gradient(135deg, rgba(248, 249, 250, 0.8), rgba(233, 236, 239, 0.8));
      border-radius: 12px;
      text-align: center;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .participant-card.active {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1));
      border-color: var(--omani-gold);
      transform: scale(1.05);
    }

    .participant-card.completed {
      background: linear-gradient(135deg, rgba(34, 139, 34, 0.1), rgba(76, 175, 80, 0.05));
      border-color: var(--omani-green);
    }

    /* ===== Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ===== */
    .responsive-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      margin: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .close-btn:hover {
      background: rgba(244, 67, 54, 0.1);
      color: var(--omani-red);
    }

    /* ===== Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ ===== */
    .mobile-full-width {
      width: 100%;
    }

    .mobile-text-center {
      text-align: center;
    }

    .touch-target {
      min-height: 48px;
      min-width: 48px;
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© ===== */
    @media (max-width: 768px) {
      .main-container {
        padding: 10px;
      }
      
      .page-header {
        padding: 15px;
      }
      
      .game-settings-card,
      .story-container,
      .participants-container {
        padding: 20px;
        margin-bottom: 20px;
      }
      
      .story-controls {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        margin-bottom: 10px;
      }
      
      .current-speaker-section {
        padding: 15px;
      }
      
      .speaker-name {
        font-size: 1.5rem;
      }
      
      .time-remaining {
        font-size: 2rem;
      }
      
      .participants-list {
        grid-template-columns: 1fr;
      }
      
      .modal-content {
        margin: 10px;
        padding: 20px;
        max-height: 90vh;
      }
    }

    @media (max-width: 480px) {
      .header-icon {
        font-size: 2rem;
      }
      
      .timer-section {
        flex-direction: column;
        gap: 10px;
      }
      
      .story-controls {
        gap: 10px;
      }
      
      .speaker-name {
        font-size: 1.2rem;
      }
      
      .time-remaining {
        font-size: 1.5rem;
      }
    }
    
    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
    .main-title {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .main-subtitle {
      font-size: 1.3rem;
      margin-bottom: 20px;
      opacity: 0.9;
    }
    
    .glow-text {
      animation: glow 2s ease-in-out infinite alternate;
    }
    
    .pulse-text {
      animation: pulse 2s infinite;
    }
    
    .text-gradient {
      background: linear-gradient(45deg, #d32f2f, #ff9800, #4caf50, #2196f3);
      background-size: 400% 400%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientAnimation 3s ease infinite;
    }
    
    .animate-bounce {
      animation: bounce 2s infinite;
    }
    
    .sparkle {
      animation: sparkle 1.5s ease-in-out infinite;
    }
    
    /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
    .welcome-notifications {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }
    
    .notification-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 25px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transform: translateY(0);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    .notification-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    
    .notification-item.success {
      background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(129, 199, 132, 0.2));
      border: 2px solid rgba(76, 175, 80, 0.3);
      color: #2e7d32;
    }
    
    .notification-item.info {
      background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(100, 181, 246, 0.2));
      border: 2px solid rgba(33, 150, 243, 0.3);
      color: #1565c0;
    }
    
    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .enhanced-btn {
      position: relative;
      overflow: hidden;
      background: linear-gradient(45deg, #d32f2f, #f44336);
      border: none;
      border-radius: 25px;
      padding: 15px 30px;
      color: white;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(211, 47, 47, 0.3);
    }
    
    .enhanced-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(211, 47, 47, 0.4);
    }
    
    .enhanced-btn:active {
      transform: translateY(0);
    }
    
    .enhanced-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .enhanced-btn:hover::before {
      left: 100%;
    }
    
    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ© */
    @keyframes glow {
      from { text-shadow: 0 0 10px rgba(211, 47, 47, 0.5); }
      to { text-shadow: 0 0 20px rgba(211, 47, 47, 0.8), 0 0 30px rgba(211, 47, 47, 0.6); }
    }
    
    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.2); }
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª */
    .instructions-welcome {
      margin: 20px 0;
      text-align: center;
    }
    
    .instructions-sections {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }
    
    .instruction-section {
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border-radius: 15px;
      padding: 20px;
      border: 2px solid rgba(211, 47, 47, 0.2);
      backdrop-filter: blur(10px);
    }
    
    .instruction-section h4 {
      color: #d32f2f;
      margin-bottom: 15px;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .enhanced-list {
      list-style: none;
      padding: 0;
    }
    
    .enhanced-list li {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    
    .enhanced-list li:hover {
      background: rgba(211, 47, 47, 0.1);
      transform: translateX(5px);
    }
    
    .enhanced-list li i {
      color: #d32f2f;
      font-size: 1.1rem;
    }
    
    .special-tips {
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.15), rgba(255, 152, 0, 0.1));
      border: 2px solid rgba(255, 193, 7, 0.3);
    }
    
    .special-tips h4 {
      color: #ff9800;
    }
    
    .special-tips .enhanced-list li i {
      color: #ff9800;
    }
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
    .enhanced-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin: 8px 0;
      min-height: 50px;
      font-size: 1rem;
    }
    
    .enhanced-btn.btn-secondary {
      background: linear-gradient(45deg, #607d8b, #78909c);
      box-shadow: 0 4px 15px rgba(96, 125, 139, 0.3);
    }
    
    .enhanced-btn.btn-secondary:hover {
      box-shadow: 0 6px 20px rgba(96, 125, 139, 0.4);
    }
    
    .enhanced-btn.btn-info {
      background: linear-gradient(45deg, #00bcd4, #26c6da);
      box-shadow: 0 4px 15px rgba(0, 188, 212, 0.3);
    }
    
    .enhanced-btn.btn-info:hover {
      box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
    }
    
    .enhanced-btn.btn-success {
      background: linear-gradient(45deg, #4caf50, #66bb6a);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }
    
    .enhanced-btn.btn-success:hover {
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
    }
    
    .enhanced-btn.btn-warning {
      background: linear-gradient(45deg, #ff9800, #ffb74d);
      box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
    }
    
    .enhanced-btn.btn-warning:hover {
      box-shadow: 0 6px 20px rgba(255, 152, 0, 0.4);
    }
    
    .enhanced-btn.btn-danger {
      background: linear-gradient(45deg, #f44336, #ef5350);
      box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
    }
    
    .enhanced-btn.btn-danger:hover {
      box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
    }
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      font-family: 'Cairo', sans-serif;
    }

    .main-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      animation: fadeInUp 0.8s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .page-header {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-icon {
      font-size: 3rem;
      color: #667eea;
      animation: bounceIn 1s ease-out;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); opacity: 1; }
    }

    .header-text h1 {
      margin: 0;
      color: #2d3748;
      font-size: 2.5rem;
      font-weight: 700;
    }

    .header-text p {
      margin: 5px 0 0 0;
      color: #718096;
      font-size: 1.1rem;
    }

    .game-settings-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      animation: slideInRight 0.8s ease-out;
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .settings-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 25px;
      color: #2d3748;
    }

    .settings-header i {
      font-size: 1.5rem;
      color: #667eea;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      color: #2d3748;
      font-weight: 600;
      font-size: 1.1rem;
    }

    .form-input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 1rem;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }

    .form-input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      background: white;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      font-family: 'Cairo', sans-serif;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      color: #8b4513;
      box-shadow: 0 4px 15px rgba(252, 182, 159, 0.4);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(252, 182, 159, 0.6);
    }

    .btn-success {
      background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
      color: #2d5016;
    }

    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(132, 250, 176, 0.6);
    }

    /* Ù…Ù†Ø·Ù‚Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ© Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø© */
    .generated-story-area {
      animation: fadeInScale 0.8s ease-out;
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .story-display-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    .story-header {
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 2px solid #e2e8f0;
    }

    .story-header h3 {
      color: #2d3748;
      font-size: 1.8rem;
      margin: 0 0 10px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .story-author {
      color: #667eea;
      font-size: 1.2rem;
      font-weight: 600;
    }

    .story-content {
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 15%, #ffecd2 100%);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 25px;
      line-height: 1.8;
      font-size: 1.2rem;
      color: #2d3748;
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: typewriter 2s ease-out;
    }

    @keyframes typewriter {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .story-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
    @media (max-width: 768px) {
      .main-container {
        padding: 15px;
      }

      .header-content {
        flex-direction: column;
        text-align: center;
      }

      .header-text h1 {
        font-size: 2rem;
      }

      .story-actions {
        grid-template-columns: 1fr;
      }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ø­ØªÙØ§Ù„ÙŠØ© */
    .celebration-effect {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4rem;
      color: #ffd700;
      z-index: 1000;
      animation: celebrationPulse 2s ease-out;
    }

    @keyframes celebrationPulse {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ */
    .students-selection-area {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      animation: slideInLeft 0.8s ease-out;
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .student-selection-card {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border-radius: 15px;
      padding: 20px;
      margin: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
    }

    .student-selection-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(240, 147, 251, 0.6);
    }

    .student-selection-card.selected {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transform: scale(1.05);
    }

    .student-avatar {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .student-name {
      font-size: 1.2rem;
      font-weight: 600;
    }

    /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø´ÙÙˆÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
    .oral-story-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 25px;
      padding: 30px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(15px);
      animation: slideInUp 1s ease-out;
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .current-speaker-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 25px;
      text-align: center;
      animation: speakerPulse 3s infinite ease-in-out;
    }

    @keyframes speakerPulse {
      0%, 100% { transform: scale(1); box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3); }
      50% { transform: scale(1.02); box-shadow: 0 8px 30px rgba(102, 126, 234, 0.5); }
    }

    .speaker-avatar {
      font-size: 4rem;
      margin-bottom: 15px;
      animation: avatarBounce 2s infinite;
    }

    @keyframes avatarBounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .speaker-label {
      font-size: 1rem;
      opacity: 0.9;
      display: block;
      margin-bottom: 5px;
    }

    .speaker-name-text {
      font-size: 1.8rem;
      font-weight: 700;
      display: block;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .story-role {
      margin-top: 15px;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      font-size: 1.1rem;
      font-weight: 500;
    }

    .timer-section {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin: 25px 0;
      padding: 20px;
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      border-radius: 20px;
    }

    .timer-info {
      text-align: center;
    }

    .time-remaining {
      font-size: 2.5rem;
      font-weight: 700;
      color: #d63384;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .timer-label {
      font-size: 1rem;
      color: #6c757d;
      margin-top: 5px;
    }

    .story-info-panel {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 25px;
    }

    .story-topic {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.2rem;
      font-weight: 600;
      color: #495057;
      margin-bottom: 15px;
    }

    .story-progress {
      text-align: center;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #28a745, #20c997);
      transition: width 0.5s ease;
      border-radius: 4px;
    }

    .progress-text {
      font-size: 1rem;
      color: #6c757d;
      font-weight: 500;
    }

    .story-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin: 25px 0;
    }

    .motivation-messages {
      background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
      border-radius: 20px;
      padding: 25px;
      text-align: center;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(132, 250, 176, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(10px);
      animation: motivationGlow 4s infinite ease-in-out;
    }

    .motivation-messages::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%);
      animation: motivationShine 3s infinite;
    }

    @keyframes motivationGlow {
      0%, 100% { box-shadow: 0 10px 30px rgba(132, 250, 176, 0.3); }
      50% { box-shadow: 0 15px 40px rgba(132, 250, 176, 0.5); }
    }

    @keyframes motivationShine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .motivation-text {
      font-size: 1.2rem;
      font-weight: 700;
      color: #155724;
      position: relative;
      z-index: 2;
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      transition: all 0.3s ease;
    }

    .motivation-icon {
      font-size: 1.5rem;
      animation: bounceIcon 2s infinite;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    @keyframes bounceIcon {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-5px) scale(1.1); }
    }

    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† */
    .participants-area {
      animation: fadeInLeft 0.8s ease-out;
    }

    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .participants-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    .participants-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .participant-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .participant-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .participant-card.active {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(40, 167, 69, 0.5);
    }

    .participant-card.done {
      background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
      opacity: 0.7;
    }

    .waiting-list {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid #e9ecef;
    }

    .waiting-students {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .waiting-student {
      background: #f8f9fa;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      padding: 8px 12px;
      font-size: 0.9rem;
      color: #495057;
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© */
    .speaker-highlight {
      animation: speakerHighlight 2s ease-in-out;
    }

    @keyframes speakerHighlight {
      0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
      50% { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); }
    }

    .time-warning {
      animation: timeWarning 1s infinite;
    }

    @keyframes timeWarning {
      0%, 100% { color: #d63384; }
      50% { color: #dc3545; }
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
    @media (max-width: 768px) {
      .timer-section {
        flex-direction: column;
        gap: 15px;
      }

      .story-controls {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .participants-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 10px;
      }

      .speaker-name-text {
        font-size: 1.4rem;
      }

      .time-remaining {
        font-size: 2rem;
      }
    }

    /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ± */
    .interactive-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      min-width: 350px;
      max-width: 450px;
      padding: 20px 25px;
      border-radius: 16px;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transform: translateX(120%);
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      z-index: 10000;
      direction: rtl;
      text-align: right;
      animation: notificationGlow 3s ease-in-out infinite;
    }

    .interactive-notification.show {
      transform: translateX(0);
    }

    .interactive-notification.hide {
      transform: translateX(120%);
      opacity: 0;
    }

    /* Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
    .interactive-notification.success {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-left: 5px solid #28a745;
    }

    .interactive-notification.info {
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      border-left: 5px solid #17a2b8;
    }

    .interactive-notification.warning {
      background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      border-left: 5px solid #ffc107;
    }

    .interactive-notification.error {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      border-left: 5px solid #dc3545;
    }

    .interactive-notification.welcome {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      border-left: 5px solid #FFD700;
      animation: welcomePulse 2s ease-in-out infinite;
    }

    /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
    .notification-icon {
      display: inline-block;
      width: 24px;
      height: 24px;
      margin-left: 12px;
      vertical-align: middle;
      border-radius: 50%;
      text-align: center;
      line-height: 24px;
      font-size: 14px;
      color: white;
      background: rgba(255, 255, 255, 0.2);
      flex-shrink: 0;
    }

    .notification-content {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .notification-text {
      flex: 1;
      line-height: 1.5;
      white-space: pre-line;
    }

    .notification-close {
      position: absolute;
      top: 8px;
      left: 8px;
      width: 24px;
      height: 24px;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border-radius: 50%;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .notification-close:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
    @keyframes notificationGlow {
      0%, 100% { 
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2); 
      }
      50% { 
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25), 
                    0 0 30px rgba(255, 255, 255, 0.1); 
      }
    }

    @keyframes welcomePulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      }
      50% { 
        transform: scale(1.02);
        box-shadow: 0 20px 45px rgba(255, 107, 107, 0.3);
      }
    }

    @keyframes slideInNotification {
      from {
        transform: translateX(120%) scale(0.8);
        opacity: 0;
      }
      to {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
    }

    /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ù„Ù„Ø¥Ø´Ø¹Ø§Ø± */
    .notification-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 0 0 16px 16px;
      animation: progressBar 5s linear forwards;
    }

    @keyframes progressBar {
      from { width: 100%; }
      to { width: 0%; }
    }

    /* ÙƒÙˆÙ†ØªÙŠÙ†Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© */
    .notifications-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10000;
      pointer-events: none;
    }

    .notifications-container .interactive-notification {
      pointer-events: all;
      margin-bottom: 15px;
      position: relative;
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
    @media (max-width: 768px) {
      .interactive-notification {
        right: 10px;
        left: 10px;
        min-width: auto;
        max-width: none;
        transform: translateY(-120%);
        top: 10px;
      }

      .interactive-notification.show {
        transform: translateY(0);
      }

      .interactive-notification.hide {
        transform: translateY(-120%);
      }
    }

    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
    .victory-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      animation: modalFadeIn 0.5s ease-out;
    }

    @keyframes modalFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .victory-content {
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.95) 0%, 
        rgba(248, 250, 255, 0.95) 50%, 
        rgba(240, 248, 255, 0.95) 100%);
      border-radius: 25px;
      padding: 40px;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
      border: 3px solid rgba(255, 215, 0, 0.3);
      animation: victorySlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes victorySlideIn {
      from {
        transform: scale(0.7) translateY(50px);
        opacity: 0;
      }
      to {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }

    /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
    .victory-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      border-radius: 25px;
    }

    .floating-particles {
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 2px, transparent 2px),
        radial-gradient(circle at 80% 20%, rgba(255, 20, 147, 0.1) 2px, transparent 2px),
        radial-gradient(circle at 40% 40%, rgba(0, 191, 255, 0.1) 2px, transparent 2px);
      background-size: 50px 50px, 60px 60px, 40px 40px;
      animation: particleFloat 15s linear infinite;
    }

    @keyframes particleFloat {
      0% { transform: translateY(0); }
      100% { transform: translateY(-100px); }
    }

    .sparkle-effect {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, 
        transparent 40%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 60%);
      animation: sparkleMove 3s ease-in-out infinite;
    }

    @keyframes sparkleMove {
      0%, 100% { transform: translateX(-100%) rotate(45deg); }
      50% { transform: translateX(100%) rotate(45deg); }
    }

    /* Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø³Ù† */
    .close-btn-enhanced {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 45px;
      height: 45px;
      border: none;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      color: white;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
      z-index: 10;
    }

    .close-btn-enhanced:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
    }

    /* Ø±Ø£Ø³ Ø§Ù„Ù†Ø§ÙØ°Ø© */
    .victory-header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      z-index: 2;
    }

    .victory-icon-container {
      position: relative;
      display: inline-block;
      margin-bottom: 20px;
    }

    .victory-main-icon {
      font-size: 4rem;
      color: #FFD700;
      text-shadow: 0 4px 8px rgba(255, 215, 0, 0.5);
      animation: trophyBounce 2s ease-in-out infinite;
    }

    @keyframes trophyBounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.05); }
    }

    .victory-sub-icons {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
    }

    .victory-sub-icons i {
      position: absolute;
      font-size: 1.5rem;
      color: #ff6b6b;
      animation: orbitalSpin 4s linear infinite;
    }

    .victory-sub-icons i:nth-child(1) {
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      animation-delay: 0s;
    }

    .victory-sub-icons i:nth-child(2) {
      top: 50%;
      right: 0;
      transform: translateY(-50%);
      animation-delay: 1.3s;
    }

    .victory-sub-icons i:nth-child(3) {
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      animation-delay: 2.6s;
    }

    @keyframes orbitalSpin {
      0% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
      100% { opacity: 1; transform: scale(1); }
    }

    .victory-title .main-title {
      font-size: 2.2rem;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .victory-title .sub-title {
      font-size: 1.1rem;
      color: #666;
      font-weight: 500;
      margin: 0;
    }

    /* Ù‚Ø³Ù… Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
    .story-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 30px 0;
      position: relative;
      z-index: 2;
    }

    .stat-item {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 255, 0.9) 100%);
      border-radius: 15px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.2);
      transition: all 0.3s ease;
    }

    .stat-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
    }

    .stat-icon {
      font-size: 2rem;
      color: #667eea;
      margin-bottom: 10px;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 5px;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .stat-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
    .participants-showcase {
      margin: 30px 0;
      position: relative;
      z-index: 2;
    }

    .participants-title {
      text-align: center;
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .participants-title i {
      color: #FFD700;
      font-size: 1.3rem;
    }

    .honor-board-enhanced {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(240, 248, 255, 0.8) 100%);
      border-radius: 15px;
      padding: 20px;
      border: 2px solid rgba(102, 126, 234, 0.2);
    }

    .honor-list-enhanced {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 200px;
      overflow-y: auto;
    }

    .honor-list-enhanced li {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 20px;
      margin-bottom: 10px;
      border-radius: 25px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      animation: participantSlideIn 0.5s ease-out;
      transition: all 0.3s ease;
    }

    .honor-list-enhanced li:hover {
      transform: translateX(5px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    @keyframes participantSlideIn {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© */
    .motivation-footer {
      text-align: center;
      margin: 25px 0;
      padding: 20px;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 140, 0, 0.1) 100%);
      border-radius: 15px;
      border: 2px dashed rgba(255, 215, 0, 0.3);
      position: relative;
      z-index: 2;
    }

    .motivation-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      animation: motivationTwinkle 1.5s ease-in-out infinite;
    }

    @keyframes motivationTwinkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
    }

    .motivation-message {
      font-size: 1.1rem;
      color: #555;
      font-weight: 500;
      font-style: italic;
      margin: 0;
      line-height: 1.5;
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
    .victory-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 30px;
      position: relative;
      z-index: 2;
    }

    .btn-enhanced {
      padding: 15px 25px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-decoration: none;
    }

    .btn-primary-enhanced {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .btn-primary-enhanced:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
    }

    .btn-secondary-enhanced {
      background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
      color: #333;
      box-shadow: 0 6px 20px rgba(132, 250, 176, 0.4);
    }

    .btn-secondary-enhanced:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(132, 250, 176, 0.5);
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
    @media (max-width: 768px) {
      .victory-content {
        margin: 20px;
        padding: 30px 20px;
        max-height: 95vh;
      }

      .victory-title .main-title {
        font-size: 1.8rem;
      }

      .story-stats {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .stat-item {
        padding: 15px;
      }

      .victory-actions {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .victory-main-icon {
        font-size: 3rem;
      }
    }
  </style>
</head>
<body>
  <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ÙˆØ­Ø¯Ø© -->
  <div class="control-buttons-container mobile-grid-4">
    <button class="control-btn touch-target" id="backBtn" title="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
      <i class="fas fa-home"></i>
    </button>
    <button class="control-btn touch-target" id="muteBtn" title="ÙƒØªÙ… Ø§Ù„ØµÙˆØª">
      <i class="fas fa-volume-up"></i>
    </button>
    <button class="control-btn touch-target" id="instructionsBtn" title="ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·">
      <i class="fas fa-question-circle"></i>
    </button>
    <button class="control-btn touch-target" id="clearMemoryBtn" title="Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØªØ§Ù„ÙŠ">
      <i class="fas fa-eraser"></i>
    </button>
    <button class="control-btn touch-target" id="fullscreenBtn" title="Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©">
      <i class="fas fa-expand"></i>
    </button>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø· -->
  <div class="instructions-overlay responsive-modal" id="instructionsModal">
    <div class="instructions-content mobile-full-height">
      <button class="close-btn touch-target" onclick="closeInstructions()" title="Ø¥ØºÙ„Ø§Ù‚">
        <i class="fas fa-times"></i>
      </button>
      <div class="instructions-title">
        <i class="fas fa-magic sparkle"></i> 
        <span class="glow-text">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„Ù… Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</span>
        <i class="fas fa-book-open pulse"></i>
      </div>
      
      <div class="instructions-welcome">
        <div class="notification-item success">
          <i class="fas fa-star sparkle"></i>
          <span>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ¬Ø±Ø¨Ø© Ø³Ø±Ø¯ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ø¨ØªÙƒØ±Ø©!</span>
        </div>
      </div>
      
      <div class="instructions-sections">
        <div class="instruction-section">
          <h4><i class="fas fa-cog"></i> Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹:</h4>
          <ul class="instructions-list enhanced-list">
            <li><i class="fas fa-graduation-cap"></i> Ø§Ø®ØªØ± Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©</li>
            <li><i class="fas fa-route"></i> Ø­Ø¯Ø¯ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±Ø¯: Ù…ØªØ³Ù„Ø³Ù„ØŒ Ø¹Ø´ÙˆØ§Ø¦ÙŠØŒ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØŒ Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</li>
            <li><i class="fas fa-book"></i> Ø§Ø®ØªØ± Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù‚ØµØ© Ø£Ùˆ Ø§Ø®ØªØ± "Ù‚ØµØ© Ø­Ø±Ø©" Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…ÙØªÙˆØ­</li>
            <li><i class="fas fa-clock"></i> Ø­Ø¯Ø¯ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø®ØµØµ Ù„ÙƒÙ„ Ø·Ø§Ù„Ø¨ (30-90 Ø«Ø§Ù†ÙŠØ©)</li>
            <li><i class="fas fa-lightbulb"></i> ÙÙŠ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„Ù‚ØµØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</li>
          </ul>
        </div>
        
        <div class="instruction-section">
          <h4><i class="fas fa-play-circle"></i> Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·:</h4>
          <ul class="instructions-list enhanced-list">
            <li><i class="fas fa-user-friends"></i> Ø³ÙŠØ¸Ù‡Ø± Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ¯ÙˆØ±Ù‡ ÙÙŠ Ø§Ù„Ù‚ØµØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</li>
            <li><i class="fas fa-forward"></i> Ø§Ø³ØªØ®Ø¯Ù… "Ø§Ù„Ù…ØªØ­Ø¯Ø« Ø§Ù„ØªØ§Ù„ÙŠ" Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù‚Ø¨Ù„ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª</li>
            <li><i class="fas fa-magic"></i> Ø§Ø¶ØºØ· "Ø¥Ù„Ù‡Ø§Ù… Ø³Ø±Ø¯ÙŠ" Ù„Ø¥Ø¹Ø·Ø§Ø¡ Ø£ÙÙƒØ§Ø± Ù„Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ù…ØªØ­Ø¯Ø«</li>
            <li><i class="fas fa-pause"></i> ÙŠÙ…ÙƒÙ† Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª Ù…Ø¤Ù‚ØªØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©</li>
            <li><i class="fas fa-microphone"></i> Ø§Ù„Ù†Ø´Ø§Ø· Ø´ÙÙˆÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ - Ø§Ù„Ø·Ù„Ø§Ø¨ ÙŠØªØ­Ø¯Ø«ÙˆÙ† ÙˆÙ„Ø§ ÙŠÙƒØªØ¨ÙˆÙ†!</li>
          </ul>
        </div>
        
        <div class="instruction-section special-tips">
          <h4><i class="fas fa-gem sparkle"></i> Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ù…Ø¨Ø¯Ø¹:</h4>
          <ul class="instructions-list enhanced-list">
            <li><i class="fas fa-heart"></i> Ø´Ø¬Ø¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø³ÙŠØ© (Ù…Ø§Ø°Ø§ ÙŠØ±ÙˆÙ†/ÙŠØ³Ù…Ø¹ÙˆÙ†/ÙŠØ´Ø¹Ø±ÙˆÙ†ØŸ)</li>
            <li><i class="fas fa-link"></i> Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù„Ù‰ Ø±Ø¨Ø· Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù‚ØµØ© Ø¨Ø¨Ø¹Ø¶Ù‡Ø§ Ø§Ù„Ø¨Ø¹Ø¶</li>
            <li><i class="fas fa-comments"></i> Ø­ÙØ² Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­ÙˆØ§Ø± Ø¨ÙŠÙ† Ø§Ù„Ø´Ø®ØµÙŠØ§Øª</li>
            <li><i class="fas fa-surprise"></i> Ù„Ø§ ØªØ®Ù Ù…Ù† Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª ÙˆØ§Ù„Ù…Ù†Ø¹Ø·ÙØ§Øª Ø§Ù„Ù…Ø«ÙŠØ±Ø©!</li>
          </ul>
        </div>
      </div>
      <button class="btn btn-primary touch-target mobile-full-width" onclick="closeInstructions()">
        <i class="fas fa-check"></i> ÙÙ‡Ù…Øª
      </button>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ±Ø© -->
  <div class="victory-modal responsive-modal" id="thankYouModal">
    <div class="victory-content mobile-full-height">
      <!-- Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© -->
      <div class="victory-background">
        <div class="floating-particles"></div>
        <div class="sparkle-effect"></div>
      </div>
      
      <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø³Ù† -->
      <button class="close-btn-enhanced touch-target" id="closeModalBtn" title="Ø¥ØºÙ„Ø§Ù‚">
        <i class="fas fa-times"></i>
      </button>
      
      <!-- Ø±Ø£Ø³ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ -->
      <div class="victory-header">
        <div class="victory-icon-container">
          <div class="victory-main-icon">
            <i class="fas fa-trophy"></i>
          </div>
          <div class="victory-sub-icons">
            <i class="fas fa-star"></i>
            <i class="fas fa-medal"></i>
            <i class="fas fa-crown"></i>
          </div>
        </div>
        
        <div class="victory-title">
          <h2 class="main-title">ğŸ­ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø±Ø¯ÙƒÙ… Ø§Ù„Ø±Ø§Ø¦Ø¹!</h2>
          <p class="sub-title">Ù„Ù‚Ø¯ Ø£Ø¨Ø¯Ø¹ØªÙ… ÙÙŠ Ù†Ø³Ø¬ Ø­ÙƒØ§ÙŠØ© Ù…Ø°Ù‡Ù„Ø©</p>
        </div>
      </div>
      
      <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
      <div class="story-stats">
        <div class="stat-item">
          <div class="stat-icon"><i class="fas fa-users"></i></div>
          <div class="stat-number" id="totalParticipants">0</div>
          <div class="stat-label">Ù…Ø´Ø§Ø±Ùƒ</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon"><i class="fas fa-clock"></i></div>
          <div class="stat-number" id="totalTime">0</div>
          <div class="stat-label">Ø¯Ù‚ÙŠÙ‚Ø©</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon"><i class="fas fa-book"></i></div>
          <div class="stat-number" id="storyParts">0</div>
          <div class="stat-label">Ø¬Ø²Ø¡</div>
        </div>
      </div>
      
      <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
      <div class="participants-showcase">
        <h3 class="participants-title">
          <i class="fas fa-star-half-alt"></i>
          Ù†Ø¬ÙˆÙ… Ø§Ù„Ù‚ØµØ©
        </h3>
        <div class="honor-board-enhanced">
          <ul class="honor-list-enhanced" id="participantList"></ul>
        </div>
      </div>
      
      <!-- Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© -->
      <div class="motivation-footer">
        <div class="motivation-icon">âœ¨</div>
        <p class="motivation-message">
          "ÙƒÙ„ ÙƒÙ„Ù…Ø© Ù‚Ù„ØªÙ…ÙˆÙ‡Ø§ Ø£Ø¶Ø§ÙØª Ø³Ø­Ø±Ø§Ù‹ Ù„Ù„Ø­ÙƒØ§ÙŠØ©. Ø£Ù†ØªÙ… Ø±ÙˆØ§Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„!"
        </p>
      </div>
      
      <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
      <div class="victory-actions">
        <button class="btn-enhanced btn-primary-enhanced touch-target" id="modalBackBtn">
          <i class="fas fa-redo"></i>
          <span>Ù‚ØµØ© Ø¬Ø¯ÙŠØ¯Ø©</span>
        </button>
        <button class="btn-enhanced btn-secondary-enhanced touch-target" id="shareStoryBtn">
          <i class="fas fa-share-alt"></i>
          <span>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†Ø¬Ø§Ø­</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© -->
  <div class="confirmation-overlay responsive-modal" id="clearMemoryModal" style="display: none;">
    <div class="confirmation-content">
      <div class="confirmation-header">
        <i class="fas fa-exclamation-triangle warning-icon"></i>
        <h3>ØªØ£ÙƒÙŠØ¯ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h3>
      </div>
      
      <div class="confirmation-body">
        <p class="warning-text">
          ğŸ§¹ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØªØ§Ù„ÙŠØŸ
        </p>
        
        <div class="warning-details">
          <h4>âš ï¸ Ø³ÙŠØªÙ… Ù…Ø³Ø­:</h4>
          <ul class="warning-list">
            <li><i class="fas fa-users"></i> Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø­Ù…Ù„Ø©</li>
            <li><i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„Ù†Ø´Ø§Ø·</li>
            <li><i class="fas fa-history"></i> ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</li>
            <li><i class="fas fa-database"></i> Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</li>
          </ul>
        </div>
        
        <p class="note-text">
          ğŸ’¡ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù…ÙÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù…Ø¹Ù„Ù… Ø¢Ø®Ø± Ø£Ùˆ ØµÙ Ø¬Ø¯ÙŠØ¯
        </p>
      </div>
      
      <div class="confirmation-actions">
        <button class="btn-confirm btn-danger" onclick="confirmClearMemory()">
          <i class="fas fa-eraser"></i>
          Ù†Ø¹Ù…ØŒ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©
        </button>
        <button class="btn-confirm btn-cancel" onclick="cancelClearMemory()">
          <i class="fas fa-times"></i>
          Ø¥Ù„ØºØ§Ø¡
        </button>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
  <div class="main-container mobile-full-width">
    <div class="page-header mobile-text-center">
      <div class="header-content">
        <div class="header-icon animate-bounce">
          <i class="fas fa-book-open text-gradient"></i>
        </div>
        <div class="header-text">
          <h1 class="main-title glow-text">ğŸŒŸ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ ğŸŒŸ</h1>
          <p class="main-subtitle pulse-text">Ø±Ø­Ù„Ø© Ø³Ø±Ø¯ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø®ÙŠØ§Ù„Ùƒ ÙˆØªØ·ÙˆÙŠØ± Ù‚Ø¯Ø±Ø§ØªÙƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©</p>
          <div class="welcome-notifications">
            <div class="notification-item success">
              <i class="fas fa-magic sparkle"></i>
              <span>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø­ÙƒØ§ÙŠØ§Øª Ø§Ù„Ø³Ø­Ø±ÙŠØ©!</span>
            </div>
            <div class="notification-item info">
              <i class="fas fa-users"></i>
              <span>ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø²Ù…Ù„Ø§Ø¦Ùƒ ÙˆØ£Ø¨Ø¯Ø¹ Ù‚ØµØµØ§Ù‹ Ù„Ø§ ØªÙÙ†Ø³Ù‰</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <div class="game-settings-card mobile-full-width" id="settingsCard">
      <div class="settings-header">
        <i class="fas fa-cog"></i>
        <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·</h3>
      </div>
      <form class="story-settings-form" id="storySettingsForm">
        <div class="form-group mobile-full-width">
          <label for="classSelect">
            <i class="fas fa-graduation-cap"></i> Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ
          </label>
          <select id="classSelect" class="form-input mobile-full-width" required>
            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„ØµÙ --</option>
          </select>
        </div>
        
        <div class="form-group mobile-full-width">
          <label for="modeSelect">
            <i class="fas fa-users"></i> Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±Ø¯
          </label>
          <select id="modeSelect" class="form-input mobile-full-width" required>
            <option value="">-- Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±Ø¯ --</option>
            <option value="sequential">Ø³Ø±Ø¯ Ù…ØªØ³Ù„Ø³Ù„ (ÙƒÙ„ Ø·Ø§Ù„Ø¨ ÙŠÙƒÙ…Ù„ Ø§Ù„Ø¬Ù…Ù„Ø©)</option>
            <option value="random">Ø³Ø±Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠ (Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„ÙƒÙ„ Ø¯ÙˆØ±)</option>
            <option value="creative">Ø³Ø±Ø¯ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ (ÙƒÙ„ Ø·Ø§Ù„Ø¨ ÙŠØ¶ÙŠÙ Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯)</option>
            <option value="select-group">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</option>
          </select>
        </div>

        <div class="form-group mobile-full-width">
          <label for="storyTypeSelect">
            <i class="fas fa-magic"></i> Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù‚ØµØ©
          </label>
          <select id="storyTypeSelect" class="form-input mobile-full-width" required>
            <option value="">-- Ø§Ø®ØªØ± Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù‚ØµØ© --</option>
            <option value="adventure">Ù…ØºØ§Ù…Ø±Ø© Ø´ÙŠÙ‚Ø©</option>
            <option value="fantasy">Ø®ÙŠØ§Ù„ ÙˆØ³Ø­Ø±</option>
            <option value="space">Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙØ¶Ø§Ø¡</option>
            <option value="school">Ø­ÙŠØ§Ø© Ù…Ø¯Ø±Ø³ÙŠØ©</option>
            <option value="mystery">Ù„ØºØ² ÙˆÙ…ØºØ§Ù…Ø±Ø©</option>
            <option value="friendship">ØµØ¯Ø§Ù‚Ø© ÙˆØªØ¹Ø§ÙˆÙ†</option>
            <option value="custom">Ù‚ØµØ© Ø­Ø±Ø© (Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø­Ø¯Ø¯)</option>
          </select>
        </div>

        <div class="form-group mobile-full-width">
          <label for="timePerStudent">
            <i class="fas fa-clock"></i> ÙˆÙ‚Øª ÙƒÙ„ Ø·Ø§Ù„Ø¨
          </label>
          <select id="timePerStudent" class="form-input mobile-full-width">
            <option value="30">30 Ø«Ø§Ù†ÙŠØ©</option>
            <option value="45" selected>45 Ø«Ø§Ù†ÙŠØ©</option>
            <option value="60">1 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="90">1.5 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="120">2 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="180">3 Ø¯Ù‚Ø§Ø¦Ù‚</option>
            <option value="300">5 Ø¯Ù‚Ø§Ø¦Ù‚</option>
            <option value="600">10 Ø¯Ù‚Ø§Ø¦Ù‚</option>
            <option value="900">15 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="1200">20 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="1800">30 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="2400">40 Ø¯Ù‚ÙŠÙ‚Ø©</option>
            <option value="2700">45 Ø¯Ù‚ÙŠÙ‚Ø©</option>
          </select>
        </div>

        <div class="form-group mobile-full-width" id="storyStarterGroup" style="display: none;">
          <label for="storyStarter">
            <i class="fas fa-lightbulb"></i> Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù‚ØµØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
          </label>
          <textarea id="storyStarter" class="form-input mobile-full-width" rows="2" 
                    placeholder="Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚ØµØ© Ø¨Ø¬Ù…Ù„Ø© Ø£Ùˆ ÙÙƒØ±Ø©... (Ù…Ø«Ù„: ÙÙŠ ÙŠÙˆÙ… Ù…Ø´Ù…Ø³ØŒ Ù‚Ø±Ø± Ø£Ø­Ù…Ø¯...)"></textarea>
        </div>
        
        <div class="button-group">
          <button type="submit" class="enhanced-btn btn-primary touch-target mobile-full-width" id="startBtn">
            <i class="fas fa-rocket sparkle"></i>
            <span>ğŸ¬ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ø³Ø±Ø¯ÙŠØ©</span>
            <i class="fas fa-arrow-right"></i>
          </button>
          <button type="button" class="enhanced-btn btn-secondary touch-target mobile-full-width" id="previewModeBtn">
            <i class="fas fa-eye"></i>
            <span>ğŸ‘€ Ø§Ø³ØªÙƒØ´Ù Ø·Ø±Ù‚ Ø§Ù„Ø³Ø±Ø¯</span>
            <i class="fas fa-question-circle"></i>
          </button>
          <button type="button" class="enhanced-btn btn-info touch-target mobile-full-width" id="helpBtn">
            <i class="fas fa-life-ring sparkle"></i>
            <span>ğŸ’¡ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</span>
            <i class="fas fa-graduation-cap"></i>
          </button>
        </div>
      </form>
    </div>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ -->
    <div class="students-selection-area mobile-full-width" id="studentSelection"></div>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø´ÙÙˆÙŠ -->
    <div class="story-activity-area mobile-full-width" id="storyContainer">
      <div class="oral-story-card mobile-text-center">
        <!-- Ø¹Ø±Ø¶ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ -->
        <div class="current-speaker-section">
          <div class="speaker-avatar">
            <i class="fas fa-user-graduate"></i>
          </div>
          <div class="speaker-name" id="currentSpeaker">
            <span class="speaker-label">Ø¯ÙˆØ± Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø¢Ù†:</span>
            <span class="speaker-name-text" id="speakerName">Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨ Ù„Ù„Ø¨Ø¯Ø¡</span>
          </div>
          <div class="story-role" id="storyRole">
            <i class="fas fa-microphone"></i>
            <span id="roleText">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚ØµØ© Ø¨Ø¬Ù…Ù„Ø© Ù…Ø«ÙŠØ±Ø©!</span>
          </div>
        </div>

        <!-- Ù…Ø¤Ù‚Øª Ø§Ù„Ø³Ø±Ø¯ -->
        <div class="timer-section">
          <canvas id="timerCanvas" width="120" height="120"></canvas>
          <div class="timer-info">
            <div class="time-remaining" id="timeRemaining">45</div>
            <div class="timer-label">Ø«Ø§Ù†ÙŠØ© Ù…ØªØ¨Ù‚ÙŠØ©</div>
          </div>
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚ØµØ© -->
        <div class="story-info-panel">
          <div class="story-topic" id="storyTopic">
            <i class="fas fa-bookmark"></i>
            <span>Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù‚ØµØ©: <span id="topicText">Ù…ØºØ§Ù…Ø±Ø©</span></span>
          </div>
          <div class="story-progress">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text">
              <span id="currentRound">Ø§Ù„Ø¯ÙˆØ± 1</span> Ù…Ù† <span id="totalRounds">5</span>
            </div>
          </div>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="story-controls">
          <button class="enhanced-btn btn-success touch-target" id="nextSpeakerBtn">
            <i class="fas fa-forward sparkle"></i>
            <span>â­ Ø§Ù„Ù…ØªØ­Ø¯Ø« Ø§Ù„ØªØ§Ù„ÙŠ</span>
          </button>
          <button class="enhanced-btn btn-warning touch-target" id="pauseBtn">
            <i class="fas fa-pause"></i>
            <span>â¸ï¸ Ø§Ø³ØªØ±Ø§Ø­Ø© ÙÙƒØ±ÙŠØ©</span>
          </button>
          <button class="enhanced-btn btn-info touch-target" id="hintBtn">
            <i class="fas fa-magic sparkle"></i>
            <span>ğŸ’¡ Ø¥Ù„Ù‡Ø§Ù… Ø³Ø±Ø¯ÙŠ</span>
          </button>
          <button class="enhanced-btn btn-danger touch-target" id="finishStoryBtn">
            <i class="fas fa-trophy sparkle"></i>
            <span>ğŸ† Ø§Ø®ØªØªÙ… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</span>
          </button>
        </div>

        <!-- Ø±Ø³Ø§Ø¦Ù„ ØªØ­ÙÙŠØ²ÙŠØ© Ù…Ø·ÙˆØ±Ø© -->
        <div class="motivation-messages" id="motivationArea">
          <div class="motivation-text" id="motivationText">
            <span class="motivation-icon">ğŸŒŸ</span>
            <span>Ø§Ø³ØªØ¹Ø¯ Ù„Ø³Ø±Ø¯ Ø±Ø§Ø¦Ø¹! Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚ØµØ© Ù…Ø«ÙŠØ±Ø© ÙˆÙ…Ø´ÙˆÙ‚Ø©!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† -->
    <div class="participants-area mobile-full-width" id="participantsContainer" style="display: none;">
      <div class="participants-card">
        <h3><i class="fas fa-users"></i> Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ†</h3>
        <div class="participants-grid" id="participantsGrid"></div>
        <div class="waiting-list">
          <h4>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</h4>
          <div class="waiting-students" id="waitingStudents"></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
    const OmaniColors = {
      red: '#DC143C',
      green: '#228B22', 
      gold: '#FFD700',
      white: '#F8F9FA',
      black: '#1A1A1A'
    };

    let ActivityManager;
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø§Ø·
    document.addEventListener('DOMContentLoaded', function() {
      // Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ‡ÙŠØ¦Ø© ActivityManager Ù…Ø¹ fallback
      try {
        ActivityManager = new ActivityUtils({
          activityName: 'create-story',
          primaryColor: OmaniColors.red,
          secondaryColor: OmaniColors.green,
          sounds: {
            click: '../assets/media/sounds/Click.mp3',
            success: '../assets/media/sounds/name-start.mp3',
            celebration: '../assets/media/sounds/clap.mp3',
            win: '../assets/media/sounds/win.mp3'
          }
        });
      } catch (error) {
        console.warn('ActivityUtils ØºÙŠØ± Ù…ØªÙˆÙØ±ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø¯Ø§Ø¦Ù„ Ø¨Ø³ÙŠØ·Ø©');
        // Ø¨Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ· Ù„Ù€ ActivityManager (Ù…Ø³ØªÙ‚Ù„ ØªÙ…Ø§Ù…Ø§Ù‹)
        ActivityManager = {
          playSound: (sound) => {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØªÙ… Ø§Ù„Ø¹Ø§Ù…Ø©
            if (window.globalMuted) {
              console.log('ğŸ”‡ Ø§Ù„ØµÙˆØª Ù…ÙƒØªÙˆÙ…:', sound);
              return;
            }
            
            console.log('ğŸµ ØªØ´ØºÙŠÙ„ ØµÙˆØª:', sound);
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù…Ù† Ù…Ø¬Ù„Ø¯ kingdom-sounds
            try {
              const audio = new Audio();
              const soundPath = `../assets/media/sounds/kingdom-sounds/${sound}.mp3`;
              audio.src = soundPath;
              audio.volume = 0.7; // Ù…Ø³ØªÙˆÙ‰ ØµÙˆØª Ù…Ù†Ø§Ø³Ø¨
              
              // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
              const playPromise = audio.play();
              if (playPromise !== undefined) {
                playPromise.then(() => {
                  console.log('âœ… ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:', sound);
                }).catch(error => {
                  console.warn('âš ï¸ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:', sound, error);
                });
              }
            } catch (error) {
              console.warn('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:', sound, error);
            }
          },
          showNotification: (message, type = 'info') => {
            console.log(`ğŸ“¢ ${type.toUpperCase()}: ${message}`);
            
            // Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆÙ†ØªÙŠÙ†Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            let container = document.querySelector('.notifications-container');
            if (!container) {
              container = document.createElement('div');
              container.className = 'notifications-container';
              document.body.appendChild(container);
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·ÙˆØ±
            const notification = document.createElement('div');
            notification.className = `interactive-notification ${type}`;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            const icons = {
              success: 'âœ“',
              info: 'â„¹',
              warning: 'âš ',
              error: 'âœ•',
              welcome: 'ğŸ‘‹'
            };
            
            const icon = icons[type] || 'â„¹';
            
            notification.innerHTML = `
              <div class="notification-content">
                <div class="notification-icon">${icon}</div>
                <div class="notification-text">${message}</div>
              </div>
              <button class="notification-close" onclick="this.parentElement.remove()">Ã—</button>
              <div class="notification-progress"></div>
            `;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„ÙƒÙˆÙ†ØªÙŠÙ†Ø±
            container.appendChild(notification);
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¸Ù‡ÙˆØ±
            setTimeout(() => {
              notification.classList.add('show');
            }, 100);
            
            // Ø¥Ø²Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
            setTimeout(() => {
              notification.classList.add('hide');
              setTimeout(() => {
                if (notification.parentElement) {
                  notification.remove();
                }
              }, 500);
            }, 5000);
          },
          toggleMute: () => console.log('ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª'),
          toggleFullscreen: () => {
            if (document.fullscreenElement) {
              document.exitFullscreen();
            } else {
              document.documentElement.requestFullscreen();
            }
          },
          isMuted: () => false
        };
      }

      initializeStoryActivity();
    });

    // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø´ÙÙˆÙŠ
    let students = [];
    let currentStudentList = [];
    let usedStudents = [];
    let selectedManualStudents = [];
    let timerInterval;
    let currentTime = 45; // Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
    let totalTime = 45;
    let currentMode = '';
    let currentStoryType = '';
    let currentRound = 1;
    let totalRounds = 5;
    let isPaused = false;
    let storyParts = []; // Ù„Ø­ÙØ¸ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù‚ØµØ©
    let currentSpeakerIndex = 0;
    let gameStartTime = 0; // Ù…ØªØºÙŠØ± Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Ø´Ø§Ø·
    let participants = []; // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ù‚ØµØ©
    
    // Ù…ØªØºÙŠØ± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¹Ø§Ù…
    window.globalMuted = false;

    // Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø©
    function showResults() {
      smartSoundSystem.play('achievement');
      
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      const totalParticipants = participants.length;
      const storyParts = participants.length;
      const totalTime = Math.floor((Date.now() - gameStartTime) / 1000);
      const minutes = Math.floor(totalTime / 60);
      const seconds = totalTime % 60;
      const timeFormatted = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†
      const participantsList = participants.map((p, index) => 
        `<li style="animation-delay: ${index * 0.1}s">
          <i class="fas fa-star"></i>
          <span>${p}</span>
        </li>`
      ).join('');

      document.getElementById('story-participants').innerHTML = participantsList;
      document.getElementById('stat-participants').textContent = totalParticipants;
      document.getElementById('stat-parts').textContent = storyParts;
      document.getElementById('stat-time').textContent = timeFormatted;
      
      document.getElementById('thankYouModal').style.display = 'flex';
      
      // ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ù…ØªØ¯Ø±Ø¬ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      setTimeout(() => {
        const statItems = document.querySelectorAll('.stat-item');
        statItems.forEach((item, index) => {
          setTimeout(() => {
            item.style.animation = 'victorySlideIn 0.6s ease-out';
          }, index * 200);
        });
      }, 300);
    }

    function hideResults() {
      document.getElementById('thankYouModal').style.display = 'none';
    }

    function startNewStory() {
      hideResults();
      resetGame();
      smartSoundSystem.play('gameStart');
    }

    function shareSuccess() {
      const totalParticipants = participants.length;
      const message = `ğŸ­ Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Ù†Ø§ Ù‚ØµØ© Ø±Ø§Ø¦Ø¹Ø© Ø¨Ù…Ø´Ø§Ø±ÙƒØ© ${totalParticipants} Ø·Ø§Ù„Ø¨! Ø´ÙƒØ±Ø§Ù‹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø¹Ù„Ù‰ Ø¥Ø¨Ø¯Ø§Ø¹Ù‡Ù… Ø§Ù„Ù…Ù…ÙŠØ²! ğŸŒŸ`;
      
      if (navigator.share) {
        navigator.share({
          title: 'Ù†Ø´Ø§Ø· Ø³Ø±Ø¯ Ø§Ù„Ù‚ØµØµ',
          text: message,
          url: window.location.href
        }).catch(console.log);
      } else if (navigator.clipboard) {
        navigator.clipboard.writeText(message).then(() => {
          ActivityManager.showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!', 'success');
        });
      } else {
        ActivityManager.showNotification('Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±Ø§Ø¦Ø¹Ø©!', 'success');
      }
    }

    function resetGame() {
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
      participants = [];
      storyParts = [];
      currentSpeakerIndex = 0;
      currentRound = 1;
      gameStartTime = 0;
      
      // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù†Ø´Ø·Ø©
      document.getElementById('gameArea').style.display = 'none';
      document.getElementById('participantsContainer').style.display = 'none';
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
      document.getElementById('setupArea').style.display = 'block';
      
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
      document.getElementById('classSelect').value = '';
      document.getElementById('modeSelect').value = '';
      document.getElementById('storyTypeSelect').value = '';
      document.getElementById('storyStarter').value = '';
      
      // Ù…Ø³Ø­ Ø§Ù„Ø¹Ø¯Ø§Ø¯
      clearInterval(timerInterval);
      
      ActivityManager.showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­', 'info');
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ø°ÙƒÙŠ ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©
    const smartSoundSystem = {
      // Ø£ØµÙˆØ§Øª Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆØ§Ù„Ø¨Ø¯Ø§ÙŠØ©
      welcome: {
        sounds: ['startapp.mp3', 'achievement-unlock.mp3', 'brain-activate.mp3'],
        messages: [
          "ğŸŒŸ Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ!",
          "ğŸ­ Ø§Ø³ØªØ¹Ø¯ Ù„Ø±Ø­Ù„Ø© Ø³Ø±Ø¯ÙŠØ© Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„Ø®ÙŠØ§Ù„ ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹!",
          "âœ¨ Ø¯Ø¹ Ù‚Ù„Ù…Ùƒ ÙŠØ±Ù‚Øµ Ù…Ø¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ù„Ø£ÙÙƒØ§Ø±!"
        ]
      },
      
      // Ø£ØµÙˆØ§Øª Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Ø´Ø§Ø·
      gameStart: {
        sounds: ['epic-charge.mp3', 'battle-horn.mp3', 'cosmic-portal.mp3'],
        messages: [
          "ğŸš€ Ù„Ù‚Ø¯ Ø§Ù†Ø·Ù„Ù‚Øª Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ø³Ø±Ø¯ÙŠØ©! Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹!",
          "ğŸ¬ Ø£Ø¶ÙˆØ§Ø¡... ÙƒØ§Ù…ÙŠØ±Ø§... Ø³Ø±Ø¯! Ø¯Ø¹ÙˆØ§ Ø§Ù„Ø­ÙƒØ§ÙŠØ© ØªØ¨Ø¯Ø£!",
          "â­ Ø§Ù„Ø¢Ù† Ø­Ø§Ù† Ø¯ÙˆØ±ÙƒÙ… Ù„ØªÙ†Ø³Ø¬ÙˆØ§ Ø®ÙŠÙˆØ· Ø§Ù„Ù‚ØµØ© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©!"
        ]
      },
      
      // Ø£ØµÙˆØ§Øª Ø§Ù„ØªØ´Ø¬ÙŠØ¹ ÙˆØ§Ù„ØªØ­ÙÙŠØ²
      encouragement: {
        sounds: ['level-up.mp3', 'bonus-collect.mp3', 'magic-sparkle.mp3', 'crystal-bonus.mp3'],
        messages: [
          "ğŸŒŸ Ø¥Ø¨Ø¯Ø§Ø¹ Ø±Ø§Ø¦Ø¹! Ø£Ø¶Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¯Ù‡Ø´Ø©!",
          "ğŸ¨ Ù…Ù…ØªØ§Ø²! Ø¯Ø¹ Ø®ÙŠØ§Ù„Ùƒ ÙŠØ­Ù„Ù‚ ÙÙŠ Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹!",
          "âš¡ Ù…Ø°Ù‡Ù„! Ø§Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨ØªÙƒØ±Ø©!",
          "ğŸ¦‹ Ø£Ø­Ø³Ù†Øª! Ø£Ø¶Ù Ù„Ù…Ø³Ø© Ø³Ø­Ø±ÙŠØ© Ù„Ù„Ù‚ØµØ©!",
          "ğŸŒˆ Ø±Ø§Ø¦Ø¹! Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ§Øª ØªÙ†Ø¨Ø¶ Ø¨Ø§Ù„Ø­ÙŠØ§Ø©!",
          "ğŸ”¥ Ø¥Ø¨Ø¯Ø§Ø¹ Ù…ØªÙ‚Ø¯! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø§Ø¦Ø¹!"
        ]
      },
      
      // Ø£ØµÙˆØ§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù„Ø·ÙŠÙ
      gentleAlert: {
        sounds: ['notification-pop.mp3', 'cosmic-click.mp3', 'crystal-ping.mp3'],
        messages: [
          "â° Ø§Ù„ÙˆÙ‚Øª ÙŠÙ†Ø³Ø§Ø¨ ÙƒØ§Ù„Ø­ÙƒØ§ÙŠØ§Øª... ÙÙƒØ± ÙÙŠ Ø®Ø§ØªÙ…Ø© Ù…Ù†Ø§Ø³Ø¨Ø©!",
          "ğŸ’¡ Ù„Ø­Ø¸Ø© ØªØ£Ù…Ù„... Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¹Ø·Ù Ù…Ø«ÙŠØ±ØŸ",
          "ğŸ¤” ØªÙˆÙ‚Ù Ù‚Ù„ÙŠÙ„Ø§Ù‹... ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø¨Ù…Ø§ Ø³Ø¨Ù‚ØŸ"
        ]
      },
      
      // Ø£ØµÙˆØ§Øª Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙˆØ§Ù„Ù†Ø¬Ø§Ø­
      achievement: {
        sounds: ['epic-victory.mp3', 'battle-victory.mp3', 'fireworks-burst.mp3', 'crowd-cheer.mp3'],
        messages: [
          "ğŸ† ØªØ­ÙØ© ÙÙ†ÙŠØ©! Ù„Ù‚Ø¯ Ø£Ø¨Ø¯Ø¹ØªÙ… Ù‚ØµØ© Ø±Ø§Ø¦Ø¹Ø©!",
          "ğŸ‘ Ø£Ø¯Ø§Ø¡ Ù…Ø°Ù‡Ù„! Ù‚ØµØªÙƒÙ… Ø³ØªØ¨Ù‚Ù‰ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©!",
          "ğŸ‰ Ø¥Ù†Ø¬Ø§Ø² Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ! Ø£Ù†ØªÙ… Ù…Ø­ØªØ±ÙÙˆ Ø§Ù„Ø³Ø±Ø¯!",
          "â­ Ù‚ØµØ© ØªØ³ØªØ­Ù‚ Ø§Ù„Ù†Ø´Ø±! Ø¥Ø¨Ø¯Ø§Ø¹ ÙÙˆÙ‚ Ø§Ù„Ø®ÙŠØ§Ù„!"
        ]
      },
      
      // Ø£ØµÙˆØ§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù„Ø·ÙŠÙØ©
      softError: {
        sounds: ['button-hover.mp3', 'menu-open.mp3'],
        messages: [
          "ğŸ¤— Ù„Ø§ Ø¨Ø£Ø³ØŒ Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø£ÙØ¶Ù„!",
          "ğŸ’­ ÙÙƒØ±Ø© Ø¬Ù…ÙŠÙ„Ø©ØŒ Ù„ÙƒÙ† Ù‡ÙŠØ§ Ù†Ø·ÙˆØ±Ù‡Ø§ Ø£ÙƒØ«Ø±!",
          "ğŸŒ± ÙƒÙ„ Ø¨Ø¯Ø§ÙŠØ© ØªØ­ØªØ§Ø¬ Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©... Ù‡ÙŠØ§ Ù†ØªØ¹Ù„Ù… Ù…Ø¹Ø§Ù‹!"
        ]
      },
      
      // Ø¯Ø§Ù„Ø© ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø°ÙƒÙŠ Ù…Ø¹ Ø±Ø³Ø§Ù„Ø©
      play: function(category, showNotification = true) {
        const categoryData = this[category];
        if (!categoryData) return;
        
        const randomSound = categoryData.sounds[Math.floor(Math.random() * categoryData.sounds.length)];
        const randomMessage = categoryData.messages[Math.floor(Math.random() * categoryData.messages.length)];
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙƒØªÙˆÙ…Ø§Ù‹
        if (!window.globalMuted && typeof ActivityManager !== 'undefined' && ActivityManager.playSound) {
          ActivityManager.playSound(randomSound.replace('.mp3', ''));
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
        if (showNotification && typeof ActivityManager !== 'undefined' && ActivityManager.showNotification) {
          ActivityManager.showNotification(randomMessage, 'success');
        }
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø®ØµØµØ©
        this.showMotivationMessage(randomMessage);
        
        return { sound: randomSound, message: randomMessage };
      },
      
      // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© Ù…Ø·ÙˆØ±Ø©
      showMotivationMessage: function(message) {
        const motivationArea = document.getElementById('motivationText');
        if (motivationArea) {
          // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù†Øµ
          const emojiMatch = message.match(/^([ğŸŒŸğŸ­ğŸš€âœ¨ğŸ¨ğŸŒˆâ­ğŸªğŸ”¥ğŸ’¡ğŸ¤”â°])/);
          const emoji = emojiMatch ? emojiMatch[1] : 'ğŸŒŸ';
          const text = message.replace(/^[ğŸŒŸğŸ­ğŸš€âœ¨ğŸ¨ğŸŒˆâ­ğŸªğŸ”¥ğŸ’¡ğŸ¤”â°]\s*/, '');
          
          // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯
          motivationArea.innerHTML = `
            <span class="motivation-icon">${emoji}</span>
            <span>${text}</span>
          `;
          
          motivationArea.parentElement.style.display = 'block';
          
          // ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ù…ØªØ¯Ø±Ø¬
          motivationArea.parentElement.style.opacity = '0';
          motivationArea.parentElement.style.transform = 'scale(0.9)';
          
          setTimeout(() => {
            motivationArea.parentElement.style.transition = 'all 0.5s ease-out';
            motivationArea.parentElement.style.opacity = '1';
            motivationArea.parentElement.style.transform = 'scale(1)';
          }, 100);
          
          // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
          setTimeout(() => {
            motivationArea.parentElement.style.transition = 'all 0.3s ease-in';
            motivationArea.parentElement.style.opacity = '0';
            motivationArea.parentElement.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
              motivationArea.parentElement.style.display = 'none';
            }, 300);
          }, 5000);
        }
      }
    };

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
    const interactiveNotifications = {
      // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø§Ù„Ù…Ø·ÙˆØ±
      welcome: function() {
        // ØªØ±Ø­ÙŠØ¨ ÙÙˆØ±ÙŠ Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
        setTimeout(() => {
          smartSoundSystem.play('welcome');
          
          // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
          setTimeout(() => {
            const welcomeMessages = [
              "ğŸ­ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ!",
              "ğŸ“š Ø§Ø³ØªØ¹Ø¯ Ù„Ø±Ø­Ù„Ø© Ù…Ø«ÙŠØ±Ø© ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø­ÙƒØ§ÙŠØ§Øª!",
              "âœ¨ Ø¯Ø¹ Ø®ÙŠØ§Ù„Ùƒ ÙŠÙ†Ø·Ù„Ù‚ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ!"
            ];
            const randomMessage = welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];
            ActivityManager.showNotification(randomMessage, 'welcome');
          }, 2000);
        }, 300);
      },
      
      // Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø·ÙˆØ±
      gameStart: function() {
        // Ø¨Ø¯Ø§ÙŠØ© ÙÙˆØ±ÙŠØ© Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª Ù…ØªØ¯Ø±Ø¬Ø©
        smartSoundSystem.play('gameStart');
        
        // Ø³Ù„Ø³Ù„Ø© Ø±Ø³Ø§Ø¦Ù„ ØªØ­ÙÙŠØ²ÙŠØ© Ù…ØªØ¯Ø±Ø¬Ø©
        const motivationSequence = [
          { message: "ï¿½ Ø§Ù†Ø·Ù„Ù‚Øª Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ø³Ø±Ø¯ÙŠØ©!", delay: 1000 },
          { message: "ï¿½ Ø£Ø¶ÙˆØ§Ø¡... ÙƒØ§Ù…ÙŠØ±Ø§... Ø³Ø±Ø¯!", delay: 2500 },
          { message: "â­ Ø¯Ø¹ÙˆØ§ Ø§Ù„Ø­ÙƒØ§ÙŠØ© ØªØ¨Ø¯Ø£!", delay: 4000 }
        ];
        
        motivationSequence.forEach(item => {
          setTimeout(() => {
            ActivityManager.showNotification(item.message, 'success');
          }, item.delay);
        });
      },
      
      // ØªØ´Ø¬ÙŠØ¹ Ù…Ù†ØªØ¸Ù… Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ø±Ø¯
      encourageDuringStory: function() {
        const randomDelay = Math.random() * 15000 + 10000; // Ø¨ÙŠÙ† 10-25 Ø«Ø§Ù†ÙŠØ©
        setTimeout(() => {
          smartSoundSystem.play('encouragement');
        }, randomDelay);
      },
      
      // ØªÙ†Ø¨ÙŠÙ‡ Ù„Ø·ÙŠÙ Ù‚Ø¨Ù„ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª
      timeWarning: function(secondsLeft) {
        if (secondsLeft === 15) {
          smartSoundSystem.play('gentleAlert');
        }
      },
      
      // Ø§Ø­ØªÙØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
      celebrate: function() {
        smartSoundSystem.play('achievement');
        
        // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©
        setTimeout(() => {
          if (typeof confetti !== 'undefined') {
            confetti({
              particleCount: 150,
              spread: 90,
              origin: { y: 0.6 },
              colors: ['#d32f2f', '#ff9800', '#4caf50', '#2196f3', '#9c27b0']
            });
          }
        }, 500);
      }
    };

    // Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    const storyRoles = {
      adventure: [
        "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©! Ø£ÙŠÙ† ÙˆÙ…ØªÙ‰ ØªØ­Ø¯Ø«ØŸ",
        "Ø£Ø¶Ù Ø´Ø®ØµÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…ØºØ§Ù…Ø±Ø©",
        "Ù…Ø§ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø°ÙŠ ÙˆØ§Ø¬Ù‡ÙˆÙ‡ØŸ",
        "ÙƒÙŠÙ Ø­Ù„ÙˆØ§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ",
        "Ø§Ø®ØªØªÙ… Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© Ø¨Ù†Ù‡Ø§ÙŠØ© Ù…Ø«ÙŠØ±Ø©!"
      ],
      fantasy: [
        "Ø§Ø®Ù„Ù‚ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø³Ø­Ø±ÙŠ! ØµÙ Ø§Ù„Ù…ÙƒØ§Ù†",
        "Ø£Ø¶Ù Ø´Ø®ØµÙŠØ© Ø³Ø­Ø±ÙŠØ© Ù…Ù…ÙŠØ²Ø©",
        "Ù…Ø§ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø³Ø­Ø±ÙŠØ© Ø§Ù„ØªÙŠ Ø¸Ù‡Ø±ØªØŸ",
        "Ù…Ø§ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø³Ø­Ø±ÙŠ Ø§Ù„Ø°ÙŠ ÙˆØ§Ø¬Ù‡ÙˆÙ‡ØŸ",
        "ÙƒÙŠÙ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù‚ØµØ© Ø§Ù„Ø³Ø­Ø±ÙŠØ©ØŸ"
      ],
      space: [
        "Ø§Ù†Ø·Ù„Ù‚ Ù„Ù„ÙØ¶Ø§Ø¡! ØµÙ Ø§Ù„Ø±Ø­Ù„Ø©",
        "Ø£Ø¶Ù ÙƒØ§Ø¦Ù† ÙØ¶Ø§Ø¦ÙŠ ÙˆØ¯ÙˆØ¯",
        "Ù…Ø§ Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø°ÙŠ Ø§ÙƒØªØ´ÙÙˆÙ‡ØŸ",
        "Ù…Ø§ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© Ø§Ù„ØªÙŠ ÙˆØ¬Ø¯ÙˆÙ‡Ø§ØŸ",
        "ÙƒÙŠÙ Ø¹Ø§Ø¯ÙˆØ§ Ù„Ù„Ø£Ø±Ø¶ØŸ"
      ],
      school: [
        "Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ! Ù…Ø§Ø°Ø§ Ø­Ø¯Ø«ØŸ",
        "Ø£Ø¶Ù ØµØ¯ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ Ù…Ø¹Ù„Ù… Ù…Ù…ÙŠØ²",
        "Ù…Ø§ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø«ÙŠØ± Ø§Ù„Ø°ÙŠ Ø´Ø§Ø±ÙƒÙˆØ§ ÙÙŠÙ‡ØŸ",
        "Ù…Ø§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙŠ Ø­Ù„ÙˆÙ‡Ø§ Ù…Ø¹Ø§Ù‹ØŸ",
        "ÙƒÙŠÙ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØŸ"
      ],
      mystery: [
        "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„ØºØ²! Ù…Ø§Ø°Ø§ Ø§ÙƒØªØ´ÙÙˆØ§ØŸ",
        "Ø£Ø¶Ù Ø¯Ù„ÙŠÙ„ Ù…Ù‡Ù… Ù„Ù„Ù‚ØµØ©",
        "Ù…Ø§ Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…Ø«ÙŠØ± Ø§Ù„Ø°ÙŠ ØªÙˆØµÙ„ÙˆØ§ Ø¥Ù„ÙŠÙ‡ØŸ",
        "ÙƒÙŠÙ Ø­Ù„ÙˆØ§ Ø§Ù„Ù„ØºØ²ØŸ",
        "Ù…Ø§ Ø§Ù„Ø³Ø± Ø§Ù„Ø°ÙŠ ÙƒØ´ÙÙˆÙ‡ØŸ"
      ],
      friendship: [
        "Ø§Ø¨Ø¯Ø£ Ø¨Ø´Ø®ØµÙŠØªÙŠÙ†! ÙƒÙŠÙ Ø§Ù„ØªÙ‚ÙŠØ§ØŸ",
        "Ø£Ø¶Ù Ù…ÙˆÙ‚Ù ÙŠØ¸Ù‡Ø± Ø§Ù„ØµØ¯Ø§Ù‚Ø©",
        "Ù…Ø§ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø°ÙŠ ÙˆØ§Ø¬Ù‡Ø§ Ù…Ø¹Ø§Ù‹ØŸ",
        "ÙƒÙŠÙ Ø³Ø§Ø¹Ø¯ ÙƒÙ„ Ù…Ù†Ù‡Ù…Ø§ Ø§Ù„Ø¢Ø®Ø±ØŸ",
        "ÙƒÙŠÙ Ù‚ÙˆØª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¨ÙŠÙ†Ù‡Ù…Ø§ØŸ"
      ],
      custom: [
        "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚ØµØ©! Ø§Ø®ØªØ± Ø§Ù„Ø´Ø®ØµÙŠØ§Øª ÙˆØ§Ù„Ù…ÙƒØ§Ù†",
        "Ø£Ø¶Ù ØªØ·ÙˆØ± Ù…Ø«ÙŠØ± Ù„Ù„Ø£Ø­Ø¯Ø§Ø«",
        "Ø£Ø¶Ù ØªØ­Ø¯ÙŠ Ø£Ùˆ Ù…Ø´ÙƒÙ„Ø©",
        "ÙƒÙŠÙ Ø³ÙŠØ­Ù„ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯ÙŠØŸ",
        "Ø§Ø®ØªØªÙ… Ø§Ù„Ù‚ØµØ© Ø¨Ù†Ù‡Ø§ÙŠØ© Ø±Ø§Ø¦Ø¹Ø©!"
      ]
    };

    // Ø±Ø³Ø§Ø¦Ù„ ØªØ­ÙÙŠØ²ÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø©
    const motivationMessages = [
      "ğŸŒŸ Ø±Ø§Ø¦Ø¹! Ø£Ø¶Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø«ÙŠØ±Ø©!",
      "ğŸ­ Ù…Ù…ØªØ§Ø²! Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ§Øª ØªØªÙØ§Ø¹Ù„ Ø£ÙƒØ«Ø±!",
      "ğŸš€ Ø¥Ø¨Ø¯Ø§Ø¹ Ø±Ø§Ø¦Ø¹! Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ù…ÙØ§Ø¬Ø£Ø©ØŸ",
      "âœ¨ Ø£Ø­Ø³Ù†Øª! Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ù„Ùƒ Ù„Ø¬Ø¹Ù„ Ø§Ù„Ù‚ØµØ© Ø£ÙƒØ«Ø± ØªØ´ÙˆÙŠÙ‚Ø§Ù‹!",
      "ğŸ¨ Ù…Ø°Ù‡Ù„! Ø£Ø¶Ù ØªÙØ§ØµÙŠÙ„ Ø­Ø³ÙŠØ© (Ù…Ø§Ø°Ø§ ÙŠØ±ÙˆÙ†/ÙŠØ³Ù…Ø¹ÙˆÙ†/ÙŠØ´Ø¹Ø±ÙˆÙ†ØŸ)",
      "ğŸŒˆ Ø¹Ø¸ÙŠÙ…! Ø§Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¨Ù…Ø§ Ù‚Ø§Ù„Ù‡ Ø²Ù…Ù„Ø§Ø¤Ùƒ!",
      "â­ Ù…Ù…ØªØ§Ø²! Ø£Ø¶Ù Ø­ÙˆØ§Ø± Ø¨ÙŠÙ† Ø§Ù„Ø´Ø®ØµÙŠØ§Øª!",
      "ğŸª Ø±Ø§Ø¦Ø¹! Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø£ÙƒØ«Ø± Ø¥Ø«Ø§Ø±Ø©!"
    ];

    // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡
    const connectionSuggestions = [
      "Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ...",
      "ÙØ¬Ø£Ø©...",
      "ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø«Ù†Ø§Ø¡...",
      "Ù„ÙƒÙ†...",
      "ÙˆØ¹Ù†Ø¯Ù…Ø§...",
      "Ø«Ù… Ø­Ø¯Ø« Ø´ÙŠØ¡ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹...",
      "ÙÙŠ ØªÙ„Ùƒ Ø§Ù„Ù„Ø­Ø¸Ø©...",
      "ÙˆÙ‡ÙƒØ°Ø§..."
    ];

    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ù…Ù† Ù…Ù„Ù studentData.json
    async function loadStudentData() {
      try {
        // Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ø¹ ØªØ£Ø«ÙŠØ± ØªØ­Ù…ÙŠÙ„
        ActivityManager.showNotification('ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨...', 'info');
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ØµØ±ÙŠ
        showLoadingIndicator(true);
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù studentData.json
        const response = await fetch('../data/studentData.json');
        
        if (!response.ok) {
          throw new Error(`Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ${response.status} ${response.statusText}`);
        }
        
        const data = await response.json();
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (!data || typeof data !== 'object') {
          throw new Error('Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ÙØ§Ø±Øº');
        }
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ ØªÙ‚Ø¯Ù…
        students = [];
        const classNames = Object.keys(data);
        
        ActivityManager.showNotification(`ğŸ“Š Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ${classNames.length} ØµÙ Ø¯Ø±Ø§Ø³ÙŠ...`, 'info');
        
        classNames.forEach((className, index) => {
          if (Array.isArray(data[className])) {
            data[className].forEach(studentName => {
              students.push({
                name: studentName,
                class: className
              });
            });
          }
          
          // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
          const progress = Math.round(((index + 1) / classNames.length) * 100);
          updateLoadingProgress(progress);
        });
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø·Ù„Ø§Ø¨
        if (students.length === 0) {
          throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø·Ù„Ø§Ø¨ ÙÙŠ Ø§Ù„Ù…Ù„Ù');
        }
        
        populateClassSelect();
        
        // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
        showLoadingIndicator(false);
        
        // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª ØµÙˆØªÙŠØ©
        setTimeout(() => {
          smartSoundSystem.play('achievement', false);
          const successMessage = `âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${students.length} Ø·Ø§Ù„Ø¨ Ù…Ù† ${classNames.length} ØµÙ Ø¨Ù†Ø¬Ø§Ø­!`;
          ActivityManager.showNotification(successMessage, 'success');
        }, 500);
        
        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„', students.length, 'Ø·Ø§Ù„Ø¨ Ù…Ù†', classNames.length, 'ØµÙ');
        
      } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨:', error);
        
        // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
        showLoadingIndicator(false);
        
        // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø®Ø·Ø£ Ù…Ø¹ ØµÙˆØª Ù„Ø·ÙŠÙ
        smartSoundSystem.play('softError', false);
        
        // Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ Ù…ÙØµÙ„Ø© ÙˆÙ…ÙÙŠØ¯Ø©
        let errorMessage = 'âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨: ';
        let helpMessage = '';
        
        if (error.message.includes('404')) {
          errorMessage += 'Ù…Ù„Ù studentData.json ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯';
          helpMessage = 'ğŸ’¡ ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ù…Ø¬Ù„Ø¯ data';
        } else if (error.message.includes('JSON')) {
          errorMessage += 'Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚';
          helpMessage = 'ğŸ”§ ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© ØªÙ†Ø³ÙŠÙ‚ JSON ÙÙŠ Ø§Ù„Ù…Ù„Ù';
        } else if (error.message.includes('ØºÙŠØ± ØµØ­ÙŠØ­')) {
          errorMessage += 'Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± ØµØ­ÙŠØ­';
          helpMessage = 'ğŸ“‹ ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙÙˆÙ ÙÙŠ Ø§Ù„Ù…Ù„Ù';
        } else {
          errorMessage += error.message;
          helpMessage = 'ğŸ”„ Ø¬Ø±Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©';
        }
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
        ActivityManager.showNotification(errorMessage, 'error');
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
        setTimeout(() => {
          ActivityManager.showNotification(helpMessage, 'info');
        }, 2000);
        
        // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø­Ù„
        setTimeout(() => {
          const additionalHelp = 'ğŸ” ØªØ­Ù‚Ù‚ Ù…Ù†: ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„ÙØŒ ØµØ­Ø© Ø§Ù„Ù…Ø³Ø§Ø±ØŒ ØµØ­Ø© ØªÙ†Ø³ÙŠÙ‚ JSON';
          ActivityManager.showNotification(additionalHelp, 'warning');
        }, 4000);
        
        // Ø¹Ø¯Ù… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© - Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ù ÙÙ‚Ø·
        students = [];
        populateClassSelect();
      }
    }

    // Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙÙˆÙ
    function populateClassSelect() {
      const classSelect = document.getElementById('classSelect');
      const classes = [...new Set(students.map(s => s.class))];
      
      classSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„ØµÙ --</option>';
      classes.forEach(className => {
        const option = document.createElement('option');
        option.value = className;
        option.textContent = className;
        classSelect.appendChild(option);
      });
    }

    // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·ÙˆØ±
    function showLoadingIndicator(show) {
      let loadingElement = document.getElementById('loadingIndicator');
      
      if (show && !loadingElement) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·ÙˆØ±
        loadingElement = document.createElement('div');
        loadingElement.id = 'loadingIndicator';
        loadingElement.innerHTML = `
          <div style="
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 248, 255, 0.95) 100%);
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            z-index: 10001;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(102, 126, 234, 0.2);
            min-width: 250px;
          ">
            <div style="
              width: 50px;
              height: 50px;
              border: 5px solid #e3f2fd;
              border-top: 5px solid #667eea;
              border-radius: 50%;
              animation: spin 1.2s linear infinite;
              margin: 0 auto 20px auto;
            "></div>
            <div style="
              font-size: 1.2rem;
              font-weight: 700;
              color: #667eea;
              margin-bottom: 15px;
              text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            ">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            <div id="loadingProgress" style="
              font-size: 1rem;
              color: #666;
              font-weight: 500;
            ">0%</div>
            <div style="
              width: 100%;
              height: 6px;
              background: #e3f2fd;
              border-radius: 3px;
              margin-top: 15px;
              overflow: hidden;
            ">
              <div id="progressBar" style="
                width: 0%;
                height: 100%;
                background: linear-gradient(90deg, #667eea, #764ba2);
                border-radius: 3px;
                transition: width 0.3s ease;
              "></div>
            </div>
          </div>
        `;
        
        // Ø¥Ø¶Ø§ÙØ© CSS Ù„Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯
        if (!document.querySelector('#loading-styles')) {
          const style = document.createElement('style');
          style.id = 'loading-styles';
          style.textContent = `
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `;
          document.head.appendChild(style);
        }
        
        document.body.appendChild(loadingElement);
        
        // ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠ
        setTimeout(() => {
          loadingElement.style.opacity = '0';
          loadingElement.style.transform = 'translate(-50%, -50%) scale(0.8)';
          loadingElement.style.transition = 'all 0.3s ease-out';
          setTimeout(() => {
            loadingElement.style.opacity = '1';
            loadingElement.style.transform = 'translate(-50%, -50%) scale(1)';
          }, 50);
        }, 10);
        
      } else if (!show && loadingElement) {
        // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠ
        loadingElement.style.transition = 'all 0.4s ease-in';
        loadingElement.style.opacity = '0';
        loadingElement.style.transform = 'translate(-50%, -50%) scale(0.9)';
        setTimeout(() => {
          if (loadingElement.parentNode) {
            loadingElement.parentNode.removeChild(loadingElement);
          }
        }, 400);
      }
    }

    function updateLoadingProgress(percentage) {
      const progressElement = document.getElementById('loadingProgress');
      const progressBar = document.getElementById('progressBar');
      
      if (progressElement) {
        progressElement.textContent = `${percentage}%`;
      }
      
      if (progressBar) {
        progressBar.style.width = `${percentage}%`;
      }
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±Ø¯
    function handleModeChange() {
      ActivityManager.playSound('cosmic-click');
      const container = document.getElementById('studentSelection');
      container.innerHTML = '';
      container.style.display = 'none';
      
      // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
      const mode = document.getElementById('modeSelect').value;
      const storyStarterGroup = document.getElementById('storyStarterGroup');
      
      if (mode === 'creative' || mode === 'select-group') {
        storyStarterGroup.style.display = 'block';
      } else {
        storyStarterGroup.style.display = 'none';
      }
    }

    // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨
    function previewGameMode() {
      const mode = document.getElementById('modeSelect').value;
      if (!mode) {
        ActivityManager.showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±Ø¯ Ø£ÙˆÙ„Ø§Ù‹', 'warning');
        return;
      }

      let description = '';
      switch(mode) {
        case 'sequential':
          description = `ğŸ”„ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„:\nâ€¢ ÙƒÙ„ Ø·Ø§Ù„Ø¨ ÙŠÙƒÙ…Ù„ Ø¬Ù…Ù„Ø© Ø£Ùˆ ÙÙ‚Ø±Ø©\nâ€¢ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ù„ÙˆØ³\nâ€¢ ÙƒÙ„ Ø·Ø§Ù„Ø¨ Ù„Ù‡ ${document.getElementById('timePerStudent').value} Ø«Ø§Ù†ÙŠØ©\nâ€¢ ÙŠØ±Ø¨Ø· ÙƒÙ„ Ø·Ø§Ù„Ø¨ Ù‚ØµØªÙ‡ Ø¨Ù…Ø§ Ù‚Ø§Ù„Ù‡ Ø§Ù„Ø³Ø§Ø¨Ù‚`;
          break;
        case 'random':
          description = `ğŸ² Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ:\nâ€¢ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ ÙƒÙ„ Ø¯ÙˆØ±\nâ€¢ ÙƒÙ„ Ø·Ø§Ù„Ø¨ ÙŠØ¶ÙŠÙ Ø¬Ø²Ø¡ Ø¬Ø¯ÙŠØ¯\nâ€¢ Ø£ÙƒØ«Ø± Ø¥Ø«Ø§Ø±Ø© ÙˆØªØ´ÙˆÙŠÙ‚\nâ€¢ ÙŠØ­ÙØ² Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ø¯Ù‰ Ø§Ù„Ø¬Ù…ÙŠØ¹`;
          break;
        case 'creative':
          description = `ğŸ¨ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ:\nâ€¢ ÙƒÙ„ Ø·Ø§Ù„Ø¨ ÙŠØ¶ÙŠÙ Ø¹Ù†ØµØ± Ù…Ù…ÙŠØ² (Ø´Ø®ØµÙŠØ©ØŒ Ù…ÙƒØ§Ù†ØŒ Ø­Ø¯Ø«)\nâ€¢ Ø­Ø±ÙŠØ© Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹\nâ€¢ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ Ø¨ÙÙƒØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…\nâ€¢ ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ`;
          break;
        case 'select-group':
          description = `ğŸ‘¥ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©:\nâ€¢ Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠØ®ØªØ§Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†\nâ€¢ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©\nâ€¢ ØªØ­ÙƒÙ… Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©\nâ€¢ ÙŠØ¶Ù…Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ø·Ù„Ø§Ø¨ Ù…Ø­Ø¯Ø¯ÙŠÙ†`;
          break;
      }
      
      ActivityManager.showNotification(description, 'info');
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø´ÙÙˆÙŠ
    function startOralStoryActivity() {
      const className = document.getElementById('classSelect').value;
      const mode = document.getElementById('modeSelect').value;
      const storyType = document.getElementById('storyTypeSelect').value;
      const timePerStudent = parseInt(document.getElementById('timePerStudent').value);
      
      if (!className || !mode || !storyType) {
        ActivityManager.showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'warning');
        return;
      }
      
      const classStudents = students.filter(s => s.class === className);
      if (classStudents.length === 0) {
        ActivityManager.showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØµÙ', 'error');
        return;
      }
      
      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
      currentMode = mode;
      currentStoryType = storyType;
      totalTime = timePerStudent;
      currentTime = timePerStudent;
      currentRound = 1;
      storyParts = [];
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©
      if (mode === 'select-group') {
        selectedManualStudents = [];
        showStudentSelection(className, mode);
        return;
      } else {
        currentStudentList = [...classStudents.map(s => s.name)];
        totalRounds = Math.min(currentStudentList.length, 8); // Ø­Ø¯ Ø£Ù‚ØµÙ‰ 8 Ø£Ø¯ÙˆØ§Ø±
      }
      
      startOralStorySession();
    }

    // Ø¨Ø¯Ø¡ Ø¬Ù„Ø³Ø© Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ
    function startOralStorySession() {
      // ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Ø´Ø§Ø·
      gameStartTime = Date.now();
      
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ¥Ø¸Ù‡Ø§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø·
      document.getElementById('settingsCard').style.display = 'none';
      document.getElementById('studentSelection').style.display = 'none';
      document.getElementById('storyContainer').style.display = 'block';
      document.getElementById('participantsContainer').style.display = 'block';
      
      // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
      updateStoryInfo();
      displayParticipants();
      
      // Ø¨Ø¯Ø¡ Ù…Ø¹ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ„
      nextSpeaker();
      
      // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ø°ÙƒÙŠ
      interactiveNotifications.gameStart();
      
      // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´Ø¬ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¸Ù…
      interactiveNotifications.encourageDuringStory();
    }

    // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚ØµØ©
    function updateStoryInfo() {
      const topicNames = {
        adventure: 'Ù…ØºØ§Ù…Ø±Ø© Ø´ÙŠÙ‚Ø©',
        fantasy: 'Ø®ÙŠØ§Ù„ ÙˆØ³Ø­Ø±', 
        space: 'Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙØ¶Ø§Ø¡',
        school: 'Ø­ÙŠØ§Ø© Ù…Ø¯Ø±Ø³ÙŠØ©',
        mystery: 'Ù„ØºØ² ÙˆÙ…ØºØ§Ù…Ø±Ø©',
        friendship: 'ØµØ¯Ø§Ù‚Ø© ÙˆØªØ¹Ø§ÙˆÙ†',
        custom: 'Ù‚ØµØ© Ø­Ø±Ø©'
      };
      
      document.getElementById('topicText').textContent = topicNames[currentStoryType] || 'Ù‚ØµØ© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©';
      document.getElementById('totalRounds').textContent = totalRounds;
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†
    function displayParticipants() {
      const grid = document.getElementById('participantsGrid');
      const waiting = document.getElementById('waitingStudents');
      
      grid.innerHTML = '';
      waiting.innerHTML = '';
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†
      const activeStudents = currentStudentList.slice(0, totalRounds);
      activeStudents.forEach((student, index) => {
        const card = document.createElement('div');
        card.className = 'participant-card';
        card.innerHTML = `
          <div><i class="fas fa-user"></i></div>
          <div>${student}</div>
          <div>Ø§Ù„Ø¯ÙˆØ± ${index + 1}</div>
        `;
        if (index === currentSpeakerIndex) {
          card.classList.add('active');
        }
        if (index < currentRound - 1) {
          card.classList.add('done');
        }
        grid.appendChild(card);
      });
      
      // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
      const waitingStudents = currentStudentList.slice(totalRounds);
      waitingStudents.forEach(student => {
        const span = document.createElement('span');
        span.className = 'waiting-student';
        span.textContent = student;
        waiting.appendChild(span);
      });
    }

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
    function nextSpeaker() {
      if (currentRound > totalRounds) {
        finishOralStory();
        return;
      }
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©
      let selectedStudent;
      
      switch(currentMode) {
        case 'sequential':
          selectedStudent = currentStudentList[currentSpeakerIndex];
          currentSpeakerIndex++;
          break;
          
        case 'random':
          const availableStudents = currentStudentList.filter(s => !usedStudents.includes(s));
          if (availableStudents.length === 0) {
            finishOralStory();
            return;
          }
          const randomIndex = Math.floor(Math.random() * availableStudents.length);
          selectedStudent = availableStudents[randomIndex];
          usedStudents.push(selectedStudent);
          break;
          
        case 'creative':
        case 'select-group':
          selectedStudent = currentStudentList[currentSpeakerIndex];
          currentSpeakerIndex++;
          break;
      }
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†
      if (selectedStudent && !participants.includes(selectedStudent)) {
        participants.push(selectedStudent);
      }
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
      updateCurrentSpeaker(selectedStudent);
      updateStoryRole();
      displayParticipants();
      
      // ØªØ´ØºÙŠÙ„ ØµÙˆØª ØªØ´Ø¬ÙŠØ¹ÙŠ Ù„Ù„Ù…ØªØ­Ø¯Ø« Ø§Ù„Ø¬Ø¯ÙŠØ¯
      smartSoundSystem.play('encouragement', false);
      
      // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø´Ø®ØµÙŠØ©
      setTimeout(() => {
        const welcomeMessages = [
          `ğŸŒŸ Ø­Ø§Ù† Ø¯ÙˆØ±Ùƒ ÙŠØ§ ${selectedStudent}! Ø£Ø·Ù„Ù‚ Ø§Ù„Ø¹Ù†Ø§Ù† Ù„Ø¥Ø¨Ø¯Ø§Ø¹Ùƒ!`,
          `â­ ${selectedStudent}ØŒ Ø§Ù„ÙƒÙ„Ù…Ø© Ù„Ùƒ Ø§Ù„Ø¢Ù†! Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù†Ø¹ÙŠØ´ Ø§Ù„Ù‚ØµØ©!`,
          `ğŸ­ ${selectedStudent}ØŒ Ù†Ø­Ù† Ù…ØªØ­Ù…Ø³ÙˆÙ† Ù„Ø³Ù…Ø§Ø¹ Ø¬Ø²Ø¦Ùƒ Ù…Ù† Ø§Ù„Ø­ÙƒØ§ÙŠØ©!`,
          `âœ¨ ${selectedStudent}ØŒ Ø¯ÙˆØ±Ùƒ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø­Ø± Ù„Ù„Ù‚ØµØ©!`
        ];
        const randomWelcome = welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];
        ActivityManager.showNotification && ActivityManager.showNotification(randomWelcome, 'success');
      }, 500);
      
      // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
      startOralTimer();
      
      // ØªØ´Ø¬ÙŠØ¹ Ù…Ù†ØªØ¸Ù… Ø®Ù„Ø§Ù„ Ø¯ÙˆØ± Ø§Ù„Ø·Ø§Ù„Ø¨
      interactiveNotifications.encourageDuringStory();
      
      // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ©
      highlightCurrentSpeaker();
      showMotivationMessage();
      
      ActivityManager.playSound('cosmic-click');
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function updateCurrentSpeaker(studentName) {
      document.getElementById('speakerName').textContent = studentName;
      document.getElementById('currentRound').textContent = `Ø§Ù„Ø¯ÙˆØ± ${currentRound}`;
      
      // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
      const progress = ((currentRound - 1) / totalRounds) * 100;
      document.getElementById('progressFill').style.width = progress + '%';
    }

    // ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ± Ø§Ù„Ù‚ØµØ©
    function updateStoryRole() {
      const roles = storyRoles[currentStoryType] || storyRoles.custom;
      const roleIndex = Math.min(currentRound - 1, roles.length - 1);
      const roleText = roles[roleIndex];
      
      document.getElementById('roleText').innerHTML = `<i class="fas fa-microphone"></i> ${roleText}`;
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø±Ø¨Ø· Ù„Ù„Ø£Ø¯ÙˆØ§Ø± ØºÙŠØ± Ø§Ù„Ø£ÙˆÙ„Ù‰
      if (currentRound > 1 && Math.random() > 0.5) {
        const connection = connectionSuggestions[Math.floor(Math.random() * connectionSuggestions.length)];
        document.getElementById('roleText').innerHTML += `<br><small style="opacity: 0.8;">ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ù€: "${connection}"</small>`;
      }
    }

    // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„Ø³Ø±Ø¯
    function startOralTimer() {
      if (timerInterval) clearInterval(timerInterval);
      
      currentTime = totalTime;
      isPaused = false;
      
      updateTimerDisplay();
      
      timerInterval = setInterval(() => {
        if (!isPaused) {
          currentTime--;
          updateTimerDisplay();
          
          if (currentTime <= 10 && currentTime > 0) {
            // ØªØ­Ø°ÙŠØ± Ø§Ù„ÙˆÙ‚Øª
            document.getElementById('timeRemaining').classList.add('time-warning');
            if (currentTime <= 5) {
              ActivityManager.playSound('countdown-tick');
            }
          }
          
          if (currentTime <= 0) {
            timeUp();
          }
        }
      }, 1000);
    }

    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ù‚Øª
    function updateTimerDisplay() {
      const canvas = document.getElementById('timerCanvas');
      const ctx = canvas.getContext('2d');
      const timeElement = document.getElementById('timeRemaining');
      
      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Ø±Ø³Ù… Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
      ctx.beginPath();
      ctx.arc(60, 60, 50, 0, 2 * Math.PI);
      ctx.strokeStyle = '#e9ecef';
      ctx.lineWidth = 8;
      ctx.stroke();
      
      // Ø±Ø³Ù… Ø§Ù„ØªÙ‚Ø¯Ù…
      const progress = currentTime / totalTime;
      const startAngle = -Math.PI / 2;
      const endAngle = startAngle + (2 * Math.PI * progress);
      
      ctx.beginPath();
      ctx.arc(60, 60, 50, startAngle, endAngle);
      
      if (currentTime <= 10) {
        ctx.strokeStyle = '#dc3545'; // Ø£Ø­Ù…Ø± Ù„Ù„ØªØ­Ø°ÙŠØ±
      } else if (currentTime <= 20) {
        ctx.strokeStyle = '#ffc107'; // Ø£ØµÙØ± Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡
      } else {
        ctx.strokeStyle = '#28a745'; // Ø£Ø®Ø¶Ø± Ø¹Ø§Ø¯ÙŠ
      }
      
      ctx.lineWidth = 8;
      ctx.lineCap = 'round';
      ctx.stroke();
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ
      timeElement.textContent = currentTime;
      timeElement.className = currentTime <= 10 ? 'time-remaining time-warning' : 'time-remaining';
      
      // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ø°ÙƒÙŠ
      if (currentTime === 15) {
        interactiveNotifications.timeWarning(15);
      }
    }

    // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª
    function timeUp() {
      clearInterval(timerInterval);
      document.getElementById('timeRemaining').classList.remove('time-warning');
      
      ActivityManager.playSound('epic-victory');
      
      // Ø¥Ø¶Ø§ÙØ© Ø¬Ø²Ø¡ Ø§Ù„Ù‚ØµØ©
      const currentSpeaker = document.getElementById('speakerName').textContent;
      storyParts.push({
        speaker: currentSpeaker,
        round: currentRound,
        role: document.getElementById('roleText').textContent
      });
      
      // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙˆØ± Ø§Ù„ØªØ§Ù„ÙŠ
      currentRound++;
      
      setTimeout(() => {
        nextSpeaker();
      }, 1500);
    }

    // ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª
    function pauseTimer() {
      isPaused = !isPaused;
      const pauseBtn = document.getElementById('pauseBtn');
      
      if (isPaused) {
        pauseBtn.innerHTML = '<i class="fas fa-play"></i> Ø§Ø³ØªØ¦Ù†Ø§Ù';
        pauseBtn.className = 'btn btn-info touch-target';
        ActivityManager.showNotification('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª Ù…Ø¤Ù‚ØªØ§Ù‹', 'info');
      } else {
        pauseBtn.innerHTML = '<i class="fas fa-pause"></i> ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª';
        pauseBtn.className = 'btn btn-warning touch-target';
        ActivityManager.showNotification('ØªÙ… Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª', 'success');
      }
    }

    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù‚ØªØ±Ø§Ø­ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ Ø°ÙƒÙŠ
    function showHint() {
      // ØªØ´ØºÙŠÙ„ ØµÙˆØª ØªØ­ÙÙŠØ²ÙŠ
      smartSoundSystem.play('encouragement');
      
      // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù‚ØµØ© ÙˆØ§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
      const roleText = document.getElementById('roleText').textContent;
      const storyType = currentStoryType;
      
      let specificHints = [];
      
      // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±
      if (roleText.includes('Ø§Ù„Ø¨Ø·Ù„')) {
        specificHints = [
          "ğŸ¦¸â€â™‚ï¸ ÙÙƒØ± ÙÙŠ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ ÙŠÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¨Ø·Ù„!",
          "âš¡ Ù…Ø§ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø®Ø§ØµØ© Ø§Ù„ØªÙŠ ÙŠÙƒØªØ´ÙÙ‡Ø§ Ø§Ù„Ø¨Ø·Ù„ Ø§Ù„Ø¢Ù†ØŸ",
          "ğŸ¯ ÙƒÙŠÙ Ø³ÙŠØ­Ù„ Ø§Ù„Ø¨Ø·Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨ØªÙƒØ±Ø©ØŸ"
        ];
      } else if (roleText.includes('Ø§Ù„Ø­ÙƒÙŠÙ…')) {
        specificHints = [
          "ğŸ§™â€â™‚ï¸ Ø£Ø¹Ø· Ù†ØµÙŠØ­Ø© Ø­ÙƒÙŠÙ…Ø© Ø£Ùˆ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…Ù‡Ù…Ø©!",
          "ğŸ“š Ø´Ø§Ø±Ùƒ Ù…Ø¹Ø±ÙØ© Ù‚Ø¯ÙŠÙ…Ø© ØªØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø­Ù„!",
          "ğŸ”® ØªÙ†Ø¨Ø£ Ø¨Ø´ÙŠØ¡ Ù…Ù‡Ù… Ø³ÙŠØ­Ø¯Ø« ÙÙŠ Ø§Ù„Ù‚ØµØ©!"
        ];
      } else if (roleText.includes('Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯')) {
        specificHints = [
          "ğŸ¤ ÙƒÙŠÙ Ø³ØªØ³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø­Ø¸Ø©ØŸ",
          "ğŸ’¡ Ø§Ù‚ØªØ±Ø­ ÙÙƒØ±Ø© Ø°ÙƒÙŠØ© Ù„Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©!",
          "ğŸ› ï¸ Ù…Ø§ Ø§Ù„Ø£Ø¯Ø§Ø© Ø£Ùˆ Ø§Ù„Ù…Ù‡Ø§Ø±Ø© Ø§Ù„ØªÙŠ Ø³ØªÙ‚Ø¯Ù…Ù‡Ø§ØŸ"
        ];
      } else {
        // Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø¹Ø§Ù…Ø©
        specificHints = [
          "âœ¨ Ø£Ø¶Ù ØªÙØµÙŠÙ„Ø§Ù‹ Ø­Ø³ÙŠØ§Ù‹ (Ù…Ø§Ø°Ø§ ÙŠÙØ³Ù…Ø¹/ÙŠÙØ±Ù‰/ÙŠÙØ´Ù…ØŸ)",
          "ğŸ­ Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ© ØªØªÙØ§Ø¹Ù„ Ù…Ø¹ Ù…Ø§ Ø­Ø¯Ø« Ø³Ø§Ø¨Ù‚Ø§Ù‹",
          "ğŸŒŸ Ø£Ø¶Ù Ø¹Ù†ØµØ± Ù…ÙØ§Ø¬Ø£Ø© Ù…Ø«ÙŠØ±!",
          "ğŸ’¬ Ø§Ø³ØªØ®Ø¯Ù… Ø­ÙˆØ§Ø±Ø§Ù‹ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø®ØµÙŠØ§Øª",
          "ğŸŒˆ Ø§Ø±Ø¨Ø· Ù‚ØµØªÙƒ Ø¨ØªÙØ§ØµÙŠÙ„ Ù…Ù† Ø­ÙŠØ§ØªÙ†Ø§ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©"
        ];
      }
      
      const randomHint = specificHints[Math.floor(Math.random() * specificHints.length)];
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ
      ActivityManager.showNotification(randomHint, 'info');
      
      // Ø±Ø³Ø§Ù„Ø© ØªØ´Ø¬ÙŠØ¹ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
      setTimeout(() => {
        const encouragement = [
          "ğŸ¨ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙƒØ±Ø© Ø®Ø§Ø·Ø¦Ø© ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹!",
          "ğŸš€ Ø¯Ø¹ Ø®ÙŠØ§Ù„Ùƒ ÙŠØ­Ù„Ù‚ Ø¹Ø§Ù„ÙŠØ§Ù‹!",
          "â­ ÙƒÙ„ ÙƒÙ„Ù…Ø© ØªÙ‚ÙˆÙ„Ù‡Ø§ ØªÙØ«Ø±ÙŠ Ø§Ù„Ù‚ØµØ©!"
        ];
        const randomEncouragement = encouragement[Math.floor(Math.random() * encouragement.length)];
        smartSoundSystem.showMotivationMessage(randomEncouragement);
      }, 2000);
    }

    // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function highlightCurrentSpeaker() {
      const speakerSection = document.querySelector('.current-speaker-section');
      speakerSection.classList.add('speaker-highlight');
      
      setTimeout(() => {
        speakerSection.classList.remove('speaker-highlight');
      }, 2000);
    }

    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ©
    function showMotivationMessage() {
      const motivationElement = document.getElementById('motivationText');
      const messages = motivationMessages;
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      
      motivationElement.textContent = randomMessage;
      
      // ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ±
      motivationElement.style.opacity = '0';
      setTimeout(() => {
        motivationElement.style.opacity = '1';
      }, 500);
    }

    // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ
    function finishOralStory() {
      clearInterval(timerInterval);
      
      // ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø­ØªÙØ§Ù„ Ø§Ù„Ø°ÙƒÙŠ
      interactiveNotifications.celebrate();
      
      setTimeout(() => {
        showResults();
      }, 2000);
    }

    // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ
    function showOralStoryResults() {
      const modal = document.getElementById('thankYouModal');
      const participantList = document.getElementById('participantList');
      
      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
      participantList.innerHTML = '';
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ù…Ø¹ Ø£Ø¯ÙˆØ§Ø±Ù‡Ù…
      storyParts.forEach((part, index) => {
        const li = document.createElement('li');
        li.className = 'honor-item';
        li.innerHTML = `
          <span class="honor-rank">${part.round}</span>
          <span class="honor-team">${part.speaker}</span>
          <span class="honor-names">Ù…Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø³Ø±Ø¯</span>
        `;
        participantList.appendChild(li);
      });
      
      // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ø§ÙØ°Ø©
      document.querySelector('.victory-team').textContent = 'ğŸ­ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø±Ø¯ÙƒÙ… Ø§Ù„Ø±Ø§Ø¦Ø¹!';
      document.querySelector('.victory-names').textContent = 'Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ† ÙÙŠ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ:';
      
      modal.style.display = 'flex';
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ù‚ØµØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
    function generateAutomaticStory() {
      const className = document.getElementById('classSelect').value;
      const storyType = document.getElementById('storyTypeSelect').value;
      const storyIdea = document.getElementById('storyIdea').value.trim();
      
      if (!className || !storyType) {
        ActivityManager.showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙ ÙˆÙ†ÙˆØ¹ Ø§Ù„Ù‚ØµØ© Ø£ÙˆÙ„Ø§Ù‹', 'warning');
        return;
      }
      
      const classStudents = students.filter(s => s.class === className);
      if (classStudents.length === 0) {
        ActivityManager.showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØµÙ', 'error');
        return;
      }
      
      // Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
      const randomStudent = classStudents[Math.floor(Math.random() * classStudents.length)];
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ØµØ©
      const story = createStory(randomStudent.name, storyType, storyIdea);
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ©
      displayGeneratedStory(story, randomStudent.name, storyType);
      
      // ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø§Ø­ØªÙØ§Ù„
      playStoryGenerationEffects();
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ØµØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª
    function createStory(studentName, storyType, customIdea = '') {
      const template = storyTemplates[storyType];
      if (!template) return 'Ù†ÙˆØ¹ Ø§Ù„Ù‚ØµØ© ØºÙŠØ± Ù…ØªÙˆÙØ±.';
      
      // Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù†Ø§ØµØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„Ù‚Ø§Ù„Ø¨
      const beginning = template.beginnings[Math.floor(Math.random() * template.beginnings.length)];
      const middle = template.middles[Math.floor(Math.random() * template.middles.length)];
      const end = template.ends[Math.floor(Math.random() * template.ends.length)];
      
      let story = beginning.replace('{name}', studentName) + ' ' + middle + '. ';
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ø¥Ø°Ø§ ØªÙˆÙØ±Øª
      if (customIdea) {
        story += `ÙˆÙƒÙ…Ø§ Ø®Ø·Ø· ${studentName}ØŒ ${customIdea}. `;
      }
      
      story += end.replace('{name}', studentName);
      
      return story;
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ© Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©
    function displayGeneratedStory(story, authorName, storyType) {
      // Ø¥Ø®ÙØ§Ø¡ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      document.getElementById('settingsCard').style.display = 'none';
      document.getElementById('studentSelection').style.display = 'none';
      document.getElementById('storyContainer').style.display = 'none';
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù‚ØµØ©
      const container = document.getElementById('generatedStoryContainer');
      container.style.display = 'block';
      
      // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚ØµØ©
      document.getElementById('storyAuthor').textContent = `Ø¨Ù‚Ù„Ù…: ${authorName}`;
      document.getElementById('storyContent').textContent = story;
      
      // Ø­ÙØ¸ Ø§Ù„Ù‚ØµØ© ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
      generatedStories.push({
        author: authorName,
        type: storyType,
        content: story,
        timestamp: new Date()
      });
    }

    // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ØµØ©
    function playStoryGenerationEffects() {
      ActivityManager.playSound('achievement-unlock');
      
      // Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ø­ØªÙØ§Ù„ÙŠ
      const celebrationElement = document.createElement('div');
      celebrationElement.className = 'celebration-effect';
      celebrationElement.innerHTML = 'âœ¨ğŸ“–âœ¨';
      document.body.appendChild(celebrationElement);
      
      setTimeout(() => {
        celebrationElement.remove();
      }, 2000);
      
      // ØªØ£Ø«ÙŠØ± Confetti
      setTimeout(() => {
        confetti({
          particleCount: 80,
          spread: 60,
          origin: { y: 0.7 },
          colors: ['#667eea', '#764ba2', '#ffecd2', '#fcb69f']
        });
        
        ActivityManager.playSound('fireworks-burst');
      }, 500);
      
      // Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ©
      setTimeout(() => {
        ActivityManager.showNotification('ğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚ØµØ© Ø±Ø§Ø¦Ø¹Ø©! Ø£Ø­Ø³Ù†Øª!', 'success');
      }, 1000);
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù‚ØµØ© Ø¬Ø¯ÙŠØ¯Ø©
    function regenerateStory() {
      const className = document.getElementById('classSelect').value;
      const storyType = document.getElementById('storyTypeSelect').value;
      const storyIdea = document.getElementById('storyIdea').value.trim();
      
      // Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨ Ù…Ø®ØªÙ„Ù
      const classStudents = students.filter(s => s.class === className);
      const availableStudents = classStudents.filter(s => 
        !generatedStories.some(story => story.author === s.name)
      );
      
      let selectedStudent;
      if (availableStudents.length > 0) {
        selectedStudent = availableStudents[Math.floor(Math.random() * availableStudents.length)];
      } else {
        selectedStudent = classStudents[Math.floor(Math.random() * classStudents.length)];
      }
      
      const story = createStory(selectedStudent.name, storyType, storyIdea);
      displayGeneratedStory(story, selectedStudent.name, storyType);
      playStoryGenerationEffects();
    }

    // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù‚ØµØ©
    function shareStory() {
      const storyContent = document.getElementById('storyContent').textContent;
      const storyAuthor = document.getElementById('storyAuthor').textContent;
      
      const shareText = `${storyAuthor}\n\n${storyContent}\n\n#Ù‚ØµØªÙŠ_Ø§Ù„Ø±Ø§Ø¦Ø¹Ø© #Ø¥Ø¨Ø¯Ø§Ø¹_Ø§Ù„Ø·Ù„Ø§Ø¨`;
      
      if (navigator.share) {
        navigator.share({
          title: 'Ù‚ØµØªÙŠ Ø§Ù„Ø±Ø§Ø¦Ø¹Ø©',
          text: shareText
        }).catch(() => {
          copyToClipboard(shareText);
        });
      } else {
        copyToClipboard(shareText);
      }
    }

    // Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ù„Ù„Ø­Ø§ÙØ¸Ø©
    function copyToClipboard(text) {
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
          ActivityManager.showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù‚ØµØ© Ù„Ù„Ø­Ø§ÙØ¸Ø©!', 'success');
        });
      } else {
        // Fallback Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        ActivityManager.showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù‚ØµØ© Ù„Ù„Ø­Ø§ÙØ¸Ø©!', 'success');
      }
    }

    // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù‚ØµØ©
    function backToSettings() {
      document.getElementById('settingsCard').style.display = 'block';
      document.getElementById('generatedStoryContainer').style.display = 'none';
      document.getElementById('storyContainer').style.display = 'none';
      document.getElementById('studentSelection').style.display = 'none';
    }

    // Ø¹Ø±Ø¶ Ù…Ù†Ø·Ù‚Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ù„Ø§Ø¨
    function showStudentSelection(className, mode) {
      const container = document.getElementById('studentSelection');
      const classStudents = students.filter(s => s.class === className);
      
      container.innerHTML = '';
      container.style.display = 'block';
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
      const header = document.createElement('div');
      header.className = 'students-selection-header mobile-text-center';
      header.innerHTML = `
        <h3><i class="fas fa-users"></i> Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ</h3>
        <p>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ø§Ø®ØªÙŠØ§Ø±Ù‡Ù… ${mode === 'select-single' ? '(Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·)' : '(Ø¹Ø¯Ø© Ø·Ù„Ø§Ø¨)'}</p>
      `;
      container.appendChild(header);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨
      const cardsContainer = document.createElement('div');
      cardsContainer.className = 'student-cards-grid mobile-grid-2';
      
      classStudents.forEach(student => {
        const card = document.createElement('div');
        card.className = 'student-selection-card touch-target';
        card.innerHTML = `
          <div class="student-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="student-name">${student.name}</div>
        `;
        
        card.addEventListener('click', () => {
          ActivityManager.playSound('crystal-ping');
          
          if (mode === 'select-single') {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨
            document.querySelectorAll('.student-selection-card').forEach(c => 
              c.classList.remove('selected'));
        selectedManualStudents = [student.name];
        card.classList.add('selected');
      } else {
        // ÙˆØ¶Ø¹ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨
        if (selectedManualStudents.includes(student.name)) {
          selectedManualStudents = selectedManualStudents.filter(n => n !== student.name);
          card.classList.remove('selected');
        } else {
          selectedManualStudents.push(student.name);
          card.classList.add('selected');
        }
      }
    });
    
    cardsContainer.appendChild(card);
  });
  
  container.appendChild(cardsContainer);
  
  // Ø²Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±Ø¯
  const startButton = document.createElement('button');
  startButton.className = 'btn btn-primary start-story-btn touch-target mobile-full-width';
  startButton.innerHTML = '<i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±Ø¯ Ø§Ù„Ø´ÙÙˆÙŠ';
  startButton.addEventListener('click', () => {
    if (selectedManualStudents.length === 0) {
      ActivityManager.showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'warning');
      return;
    }
    
    currentStudentList = [...selectedManualStudents];
    totalRounds = Math.min(currentStudentList.length, 8);
    usedStudents = [];
    startOralStorySession();
  });
  
  container.appendChild(startButton);
}    // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª (Ù„Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø¦ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
    function startTimer() {
      const canvas = document.getElementById('timerCanvas');
      const ctx = canvas.getContext('2d');
      secondsPassed = 0;

      function drawTimer() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Ø±Ø³Ù… Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
        ctx.beginPath();
        ctx.arc(75, 75, 65, 0, 2 * Math.PI);
        ctx.strokeStyle = '#E0E0E0';
        ctx.lineWidth = 10;
        ctx.stroke();

        // Ø±Ø³Ù… Ø§Ù„ØªÙ‚Ø¯Ù…
        const progress = (secondsPassed % 300) / 300; // ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚
        ctx.beginPath();
        ctx.arc(75, 75, 65, -Math.PI / 2, (2 * Math.PI * progress) - Math.PI / 2);
        ctx.strokeStyle = OmaniColors.red;
        ctx.lineWidth = 10;
        ctx.stroke();

        // Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª
        ctx.fillStyle = OmaniColors.black;
        ctx.font = 'bold 18px Cairo';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        
        const minutes = Math.floor(secondsPassed / 60);
        const seconds = secondsPassed % 60;
        const timeText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        ctx.fillText(timeText, 75, 75);
      }

      drawTimer();
      timerInterval = setInterval(() => {
        secondsPassed++;
        drawTimer();
      }, 1000);
    }

    // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª
    function stopTimer() {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
    }

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø·
    function resetStoryActivity() {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
      
      currentStudentList = [];
      usedStudents = [];
      selectedManualStudents = [];
      storyParts = [];
      currentRound = 1;
      currentSpeakerIndex = 0;
      currentTime = 45;
      totalTime = 45;
      isPaused = false;
      currentMode = '';
      currentStoryType = '';
      
      // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      document.getElementById('settingsCard').style.display = 'block';
      document.getElementById('studentSelection').style.display = 'none';
      document.getElementById('storyContainer').style.display = 'none';
      document.getElementById('participantsContainer').style.display = 'none';
      document.getElementById('thankYouModal').style.display = 'none';
      
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      document.getElementById('storySettingsForm').reset();
      document.getElementById('studentSelection').innerHTML = '';
      
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©
      document.getElementById('storyStarterGroup').style.display = 'none';
      
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
      const pauseBtn = document.getElementById('pauseBtn');
      pauseBtn.innerHTML = '<i class="fas fa-pause"></i> ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª';
      pauseBtn.className = 'btn btn-warning touch-target';
      
      document.getElementById('timeRemaining').classList.remove('time-warning');
      
      ActivityManager.showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø·', 'success');
    }

    // Ø¯Ø§Ù„Ø© Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØªØ§Ù„ÙŠ
    function clearMemoryForNextTeacher() {
      try {
        // Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¬Ø§Ø±ÙŠØ©
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        students = [];
        currentStudentList = [];
        usedStudents = [];
        selectedManualStudents = [];
        storyParts = [];
        participants = [];
        currentRound = 1;
        currentSpeakerIndex = 0;
        currentTime = 45;
        totalTime = 45;
        isPaused = false;
        currentMode = '';
        currentStoryType = '';
        gameStartTime = 0;
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª
        window.globalMuted = false;
        const muteBtn = document.getElementById('muteBtn');
        const muteIcon = muteBtn.querySelector('i');
        muteIcon.className = 'fas fa-volume-up';
        muteBtn.classList.remove('muted');
        muteBtn.title = 'ÙƒØªÙ… Ø§Ù„ØµÙˆØª';
        
        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ÙˆØ§ÙØ° ÙˆØ§Ù„Ù…Ù†Ø§Ø·Ù‚
        document.getElementById('instructionsModal').style.display = 'none';
        document.getElementById('thankYouModal').style.display = 'none';
        document.getElementById('settingsCard').style.display = 'block';
        document.getElementById('studentSelection').style.display = 'none';
        document.getElementById('storyContainer').style.display = 'none';
        document.getElementById('participantsContainer').style.display = 'none';
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
        document.getElementById('storySettingsForm').reset();
        document.getElementById('studentSelection').innerHTML = '';
        document.getElementById('storyStarter').value = '';
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
        document.getElementById('classSelect').value = '';
        document.getElementById('modeSelect').value = '';
        document.getElementById('storyTypeSelect').value = '';
        document.getElementById('timePerStudent').value = '45';
        
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©
        document.getElementById('storyStarterGroup').style.display = 'none';
        
        // Ù…Ø³Ø­ localStorage Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„Ù†Ø´Ø§Ø·
        const keysToRemove = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key && (key.includes('story') || key.includes('activity') || key.includes('student'))) {
            keysToRemove.push(key);
          }
        }
        keysToRemove.forEach(key => localStorage.removeItem(key));
        
        // Ù…Ø³Ø­ sessionStorage
        const sessionKeysToRemove = [];
        for (let i = 0; i < sessionStorage.length; i++) {
          const key = sessionStorage.key(i);
          if (key && (key.includes('story') || key.includes('activity') || key.includes('student'))) {
            sessionKeysToRemove.push(key);
          }
        }
        sessionKeysToRemove.forEach(key => sessionStorage.removeItem(key));
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨
        loadStudentData();
        
        // Ø±Ø³Ø§Ø¦Ù„ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙØ±Ø§Øº
        ActivityManager.showNotification('ğŸ§¹ ØªÙ… Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        
        setTimeout(() => {
          ActivityManager.showNotification('âœ¨ Ø§Ù„Ù†Ø´Ø§Ø· Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØªØ§Ù„ÙŠ!', 'info');
        }, 1500);
        
        setTimeout(() => {
          ActivityManager.showNotification('ğŸ¯ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¢Ù† Ø§Ø®ØªÙŠØ§Ø± ØµÙ Ø¬Ø¯ÙŠØ¯ ÙˆØ¨Ø¯Ø¡ Ù†Ø´Ø§Ø· Ø¬Ø¯ÙŠØ¯', 'welcome');
        }, 3000);
        
        // ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙ†Ø¸ÙŠÙ
        document.body.style.transition = 'all 0.5s ease';
        document.body.style.transform = 'scale(0.98)';
        document.body.style.opacity = '0.8';
        
        setTimeout(() => {
          document.body.style.transform = 'scale(1)';
          document.body.style.opacity = '1';
        }, 300);
        
        console.log('âœ… ØªÙ… Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­');
        
      } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©:', error);
        ActivityManager.showNotification('âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©. ÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.', 'error');
      }
    }

    // Ø¯ÙˆØ§Ù„ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©
    function showClearMemoryConfirmation() {
      document.getElementById('clearMemoryModal').style.display = 'flex';
      ActivityManager.showNotification('âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ù‚Ø±Ø§Ø±Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©', 'warning');
    }

    function confirmClearMemory() {
      document.getElementById('clearMemoryModal').style.display = 'none';
      ActivityManager.showNotification('ğŸ§¹ Ø¬Ø§Ø±ÙŠ Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©...', 'info');
      
      setTimeout(() => {
        clearMemoryForNextTeacher();
      }, 500);
    }

    function cancelClearMemory() {
      document.getElementById('clearMemoryModal').style.display = 'none';
      ActivityManager.showNotification('âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø¥ÙØ±Ø§Øº Ø§Ù„Ø°Ø§ÙƒØ±Ø©', 'info');
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø§Ø·
    function initializeStoryActivity() {
      loadStudentData();
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ±Ø©
      document.getElementById('backBtn').addEventListener('click', () => {
        ActivityManager.showNotification('ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©...', 'info');
        setTimeout(() => {
          window.location.href = '../main.html';
        }, 800);
      });
      
      // Ù…ØªØºÙŠØ± Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµÙˆØª
      
      document.getElementById('muteBtn').addEventListener('click', () => {
        window.globalMuted = !window.globalMuted;
        const btn = document.getElementById('muteBtn');
        const icon = btn.querySelector('i');
        
        if (window.globalMuted) {
          icon.className = 'fas fa-volume-mute';
          btn.classList.add('muted');
          btn.title = 'ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª';
          ActivityManager.showNotification('ğŸ”‡ ØªÙ… ÙƒØªÙ… Ø§Ù„ØµÙˆØª', 'info');
          
          // ÙƒØªÙ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙˆØ§Øª
          const audioElements = document.querySelectorAll('audio');
          audioElements.forEach(audio => {
            audio.muted = true;
          });
        } else {
          icon.className = 'fas fa-volume-up';
          btn.classList.remove('muted');
          btn.title = 'ÙƒØªÙ… Ø§Ù„ØµÙˆØª';
          ActivityManager.showNotification('ğŸ”Š ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª', 'success');
          
          // Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ… Ø§Ù„Ø£ØµÙˆØ§Øª
          const audioElements = document.querySelectorAll('audio');
          audioElements.forEach(audio => {
            audio.muted = false;
          });
        }
      });
      
      document.getElementById('instructionsBtn').addEventListener('click', () => {
        ActivityManager.showNotification('ğŸ“– ÙØªØ­ Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª...', 'info');
        setTimeout(() => {
          document.getElementById('instructionsModal').style.display = 'flex';
        }, 300);
      });
      
      document.getElementById('clearMemoryBtn').addEventListener('click', () => {
        showClearMemoryConfirmation();
      });
      
      document.getElementById('fullscreenBtn').addEventListener('click', () => {
        const btn = document.getElementById('fullscreenBtn');
        const icon = btn.querySelector('i');
        
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen().then(() => {
            icon.className = 'fas fa-compress';
            btn.title = 'Ø®Ø±ÙˆØ¬ Ù…Ù† Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©';
            ActivityManager.showNotification('ğŸ–¥ï¸ ØªÙ… ØªÙØ¹ÙŠÙ„ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'success');
          }).catch(() => {
            ActivityManager.showNotification('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'warning');
          });
        } else {
          document.exitFullscreen().then(() => {
            icon.className = 'fas fa-expand';
            btn.title = 'Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©';
            ActivityManager.showNotification('ğŸ“± ØªÙ… Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'info');
          });
        }
      });
      
      // Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ±Ø§Øª Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
      document.addEventListener('fullscreenchange', () => {
        const btn = document.getElementById('fullscreenBtn');
        const icon = btn.querySelector('i');
        
        if (document.fullscreenElement) {
          icon.className = 'fas fa-compress';
          btn.title = 'Ø®Ø±ÙˆØ¬ Ù…Ù† Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©';
        } else {
          icon.className = 'fas fa-expand';
          btn.title = 'Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©';
        }
      });
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
      document.getElementById('storySettingsForm').addEventListener('submit', (e) => {
        e.preventDefault();
        startOralStoryActivity();
      });
      
      // Ù…Ø¹Ø§Ù„Ø¬ ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±Ø¯
      document.getElementById('modeSelect').addEventListener('change', handleModeChange);
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø²Ø± Ù…Ø¹Ø§ÙŠÙ†Ø© Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨
      document.getElementById('previewModeBtn').addEventListener('click', previewGameMode);
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø²Ø± Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ
      document.getElementById('helpBtn').addEventListener('click', () => {
        smartSoundSystem.play('encouragement', false);
        showSmartTeacherGuide();
      });
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø´ÙÙˆÙŠ
      document.getElementById('nextSpeakerBtn').addEventListener('click', () => {
        if (timerInterval) {
          clearInterval(timerInterval);
          timeUp();
        }
      });
      
      document.getElementById('pauseBtn').addEventListener('click', pauseTimer);
      document.getElementById('hintBtn').addEventListener('click', showHint);
      document.getElementById('finishStoryBtn').addEventListener('click', () => {
        // Ø¥Ù†Ù‡Ø§Ø¡ Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
        ActivityManager.showNotification('ğŸ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø³Ø±Ø¯...', 'success');
        setTimeout(() => {
          finishOralStory();
        }, 1000);
      });
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      document.getElementById('closeModalBtn').addEventListener('click', () => {
        document.getElementById('thankYouModal').style.display = 'none';
      });
      
      document.getElementById('modalBackBtn').addEventListener('click', resetStoryActivity);
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø©
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('close-btn-enhanced')) {
          hideResults();
        }
        if (e.target.closest('#modalBackBtn')) {
          startNewStory();
        }
        if (e.target.closest('#shareStoryBtn')) {
          shareSuccess();
        }
      });
      
      // ØªÙØ¹ÙŠÙ„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠØ¨
      interactiveNotifications.welcome();
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
    function closeInstructions() {
      document.getElementById('instructionsModal').style.display = 'none';
    }

    // Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ
    function showSmartTeacherGuide() {
      const tips = [
        {
          title: "ğŸ’¡ Ù†ØµØ§Ø¦Ø­ ØªÙØ§Ø¹Ù„ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ø±Ø¯",
          content: "Ø´Ø¬Ø¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø´Ø®ØµÙŠØ§ØªØŒ ÙˆØ£ÙˆØµØ§Ù Ø§Ù„Ù…ÙƒØ§Ù†ØŒ ÙˆØ§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ø´Ø®ØµÙŠØ§Øª"
        },
        {
          title: "ğŸ­ ØªØ­ÙÙŠØ² Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹",
          content: "Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø«Ù„: 'Ù…Ø§Ø°Ø§ Ù„Ùˆ Ø­Ø¯Ø«...ØŸ' Ø£Ùˆ 'ÙƒÙŠÙ Ø´Ø¹Ø±Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¹Ù†Ø¯Ù…Ø§...ØŸ' Ù„Ø¥Ø«Ø§Ø±Ø© Ø§Ù„ØªÙÙƒÙŠØ±"
        },
        {
          title: "ğŸ”— Ø±Ø¨Ø· Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡",
          content: "Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù„Ù‰ Ø±Ø¨Ø· Ø¬Ø²Ø¦Ù‡Ù… Ø¨Ù…Ø§ Ù‚Ø§Ù„Ù‡ Ø§Ù„Ø³Ø§Ø¨Ù‚ÙˆÙ† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø«Ù„: 'Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø§ Ù‚Ø§Ù„Ù‡ Ø£Ø­Ù…Ø¯...'"
        },
        {
          title: "â° Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª",
          content: "Ø¥Ø°Ø§ ØªÙˆÙ‚Ù Ø§Ù„Ø·Ø§Ù„Ø¨ØŒ Ø§Ù…Ù†Ø­Ù‡ ÙˆÙ‚ØªØ§Ù‹ Ù„Ù„ØªÙÙƒÙŠØ± Ø«Ù… Ù‚Ø¯Ù… Ø§Ù‚ØªØ±Ø§Ø­Ø§Ù‹ Ù„Ø·ÙŠÙØ§Ù‹ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙ‡ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"
        }
      ];
      
      const randomTip = tips[Math.floor(Math.random() * tips.length)];
      
      ActivityManager.showNotification(
        `${randomTip.title}\n${randomTip.content}`, 
        'info'
      );
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ù†ØµÙŠØ­Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
      setTimeout(() => {
        const encouragementPhrases = [
          "ğŸŒŸ Ø°ÙƒØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¨Ø£Ù† ÙƒÙ„ ÙÙƒØ±Ø© Ù…Ù…ÙŠØ²Ø© ÙˆÙ…ÙÙŠØ¯Ø©!",
          "ğŸ¨ Ø´Ø¬Ø¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®ÙŠØ§Ù„ Ø¨Ø­Ø±ÙŠØ©!",
          "ğŸ¤ Ø§Ù…Ø¯Ø­ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ¨Ù†ÙˆÙ† Ø¹Ù„Ù‰ Ø£ÙÙƒØ§Ø± Ø¨Ø¹Ø¶Ù‡Ù… Ø§Ù„Ø¨Ø¹Ø¶!",
          "ğŸ”¥ Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙŠØ´Ø¹Ø±ÙˆÙ† Ø¨Ø§Ù„Ø­Ù…Ø§Ø³ Ù„Ø³Ù…Ø§Ø¹ Ù…Ø§ Ø³ÙŠÙ‚ÙˆÙ„Ù‡ Ø²Ù…Ù„Ø§Ø¤Ù‡Ù…!"
        ];
        
        const randomEncouragement = encouragementPhrases[Math.floor(Math.random() * encouragementPhrases.length)];
        ActivityManager.showNotification(randomEncouragement, 'success');
      }, 3000);
    }

    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeInstructions();
        document.getElementById('thankYouModal').style.display = 'none';
      }
    });
  </script>
</body>
</html>
